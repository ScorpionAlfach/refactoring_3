<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<w:document xmlns:wpc="http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas" xmlns:cx="http://schemas.microsoft.com/office/drawing/2014/chartex" xmlns:cx1="http://schemas.microsoft.com/office/drawing/2015/9/8/chartex" xmlns:cx2="http://schemas.microsoft.com/office/drawing/2015/10/21/chartex" xmlns:cx3="http://schemas.microsoft.com/office/drawing/2016/5/9/chartex" xmlns:cx4="http://schemas.microsoft.com/office/drawing/2016/5/10/chartex" xmlns:cx5="http://schemas.microsoft.com/office/drawing/2016/5/11/chartex" xmlns:cx6="http://schemas.microsoft.com/office/drawing/2016/5/12/chartex" xmlns:cx7="http://schemas.microsoft.com/office/drawing/2016/5/13/chartex" xmlns:cx8="http://schemas.microsoft.com/office/drawing/2016/5/14/chartex" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:aink="http://schemas.microsoft.com/office/drawing/2016/ink" xmlns:am3d="http://schemas.microsoft.com/office/drawing/2017/model3d" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:oel="http://schemas.microsoft.com/office/2019/extlst" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:m="http://schemas.openxmlformats.org/officeDocument/2006/math" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:wp14="http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing" xmlns:wp="http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing" xmlns:w10="urn:schemas-microsoft-com:office:word" xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main" xmlns:w14="http://schemas.microsoft.com/office/word/2010/wordml" xmlns:w15="http://schemas.microsoft.com/office/word/2012/wordml" xmlns:w16cex="http://schemas.microsoft.com/office/word/2018/wordml/cex" xmlns:w16cid="http://schemas.microsoft.com/office/word/2016/wordml/cid" xmlns:w16="http://schemas.microsoft.com/office/word/2018/wordml" xmlns:w16du="http://schemas.microsoft.com/office/word/2023/wordml/word16du" xmlns:w16sdtdh="http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash" xmlns:w16sdtfl="http://schemas.microsoft.com/office/word/2024/wordml/sdtformatlock" xmlns:w16se="http://schemas.microsoft.com/office/word/2015/wordml/symex" xmlns:wpg="http://schemas.microsoft.com/office/word/2010/wordprocessingGroup" xmlns:wpi="http://schemas.microsoft.com/office/word/2010/wordprocessingInk" xmlns:wne="http://schemas.microsoft.com/office/word/2006/wordml" xmlns:wps="http://schemas.microsoft.com/office/word/2010/wordprocessingShape" mc:Ignorable="w14 w15 w16se w16cid w16 w16cex w16sdtdh w16sdtfl w16du wp14"><w:body><w:p w14:paraId="04053C6E" w14:textId="7819F2DC" w:rsidR="00693834" w:rsidRDefault="00F72E2C"><w:r><w:t>Крояков Андрей</w:t></w:r></w:p><w:p w14:paraId="532CB71D" w14:textId="300DD6BA" w:rsidR="00970260" w:rsidRDefault="00970260"><w:r><w:t>ЭФБО-06-22</w:t></w:r></w:p><w:p w14:paraId="1E084D8A" w14:textId="77777777" w:rsidR="00970260" w:rsidRDefault="00970260"/><w:p w14:paraId="14DAFF55" w14:textId="0868A919" w:rsidR="00970260" w:rsidRPr="00970260" w:rsidRDefault="00970260"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="00970260"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>Краткое описание проекта</w:t></w:r></w:p><w:p w14:paraId="462B41FB" w14:textId="322BDA68" w:rsidR="00970260" w:rsidRPr="00D1313A" w:rsidRDefault="00970260"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>До рефакторинга</w:t></w:r><w:r w:rsidRPr="001D356A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>:</w:t></w:r></w:p><w:p w14:paraId="79071A7F" w14:textId="6657F0FD" w:rsidR="00970260" w:rsidRPr="00970260" w:rsidRDefault="00970260" w:rsidP="00970260"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00970260"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Проект представлял собой распределённый монолит для сбора и отображения  данных:</w:t></w:r></w:p><w:p w14:paraId="20906908" w14:textId="3E8E934E" w:rsidR="00970260" w:rsidRPr="00D1313A" w:rsidRDefault="00970260" w:rsidP="00970260"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="1"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>rust_iss</w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t xml:space="preserve">: Rust сервис для опроса внешних API </w:t></w:r></w:p><w:p w14:paraId="5F1A2B26" w14:textId="07CC4C27" w:rsidR="00970260" w:rsidRPr="00D1313A" w:rsidRDefault="00970260" w:rsidP="00970260"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="1"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>php_web</w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>: Laravel веб-приложение с дашбордами и API-прокси</w:t></w:r></w:p><w:p w14:paraId="09F64971" w14:textId="090D3462" w:rsidR="00970260" w:rsidRPr="00D1313A" w:rsidRDefault="00970260" w:rsidP="00970260"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="1"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>pascal_legacy</w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>: Легаси-утилита на Pascal для генерации CSV и импорта в БД</w:t></w:r></w:p><w:p w14:paraId="486C3876" w14:textId="288FA992" w:rsidR="00970260" w:rsidRPr="00D1313A" w:rsidRDefault="00970260" w:rsidP="00970260"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="1"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>nginx</w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">: Reverse proxy </w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>для</w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> PHP </w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>приложения</w:t></w:r></w:p><w:p w14:paraId="7ABEDA7C" w14:textId="2FCE9536" w:rsidR="00970260" w:rsidRPr="00D1313A" w:rsidRDefault="00970260" w:rsidP="00970260"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="1"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>PostgreSQL</w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>: Основная БД</w:t></w:r></w:p><w:p w14:paraId="1317E805" w14:textId="77777777" w:rsidR="00970260" w:rsidRPr="00D1313A" w:rsidRDefault="00970260" w:rsidP="00970260"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr></w:p><w:p w14:paraId="4BD4FE79" w14:textId="77777777" w:rsidR="00970260" w:rsidRPr="00D1313A" w:rsidRDefault="00970260" w:rsidP="00970260"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>После рефакторинга:</w:t></w:r></w:p><w:p w14:paraId="1FF21A3D" w14:textId="18F360CB" w:rsidR="00970260" w:rsidRPr="00D1313A" w:rsidRDefault="00970260" w:rsidP="00970260"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:br/><w:t>Архитектура улучшена с применением чистой архитектуры и современных паттернов:</w:t></w:r></w:p><w:p w14:paraId="25E54C2F" w14:textId="637AB550" w:rsidR="00970260" w:rsidRPr="00D1313A" w:rsidRDefault="00970260" w:rsidP="00970260"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="2"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>rust_iss</w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">: </w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Полностью</w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>рефакторенный</w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>с</w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>слоистой</w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>архитектурой</w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> (routes, handlers, services, clients, repo, domain, config)</w:t></w:r></w:p><w:p w14:paraId="68A87F7D" w14:textId="3597CD6F" w:rsidR="00970260" w:rsidRPr="00D1313A" w:rsidRDefault="00970260" w:rsidP="00970260"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="2"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>php_web</w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>: Рефакторенный с выделенным service layer, ViewModels, улучшенным кэшированием</w:t></w:r></w:p><w:p w14:paraId="232FC524" w14:textId="1B250591" w:rsidR="00970260" w:rsidRPr="00D1313A" w:rsidRDefault="00970260" w:rsidP="00970260"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="2"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>go_legacy</w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>: Миграция с Pascal на Go с сохранением контракта и функциональности</w:t></w:r></w:p><w:p w14:paraId="7AAAAAAD" w14:textId="2DD36D25" w:rsidR="00970260" w:rsidRPr="00D1313A" w:rsidRDefault="00970260" w:rsidP="00970260"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="2"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Улучшенная безопасность, обработка ошибок, логирование, тестируемость</w:t></w:r></w:p><w:p w14:paraId="69666231" w14:textId="00629C52" w:rsidR="00970260" w:rsidRDefault="00970260" w:rsidP="00970260"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr></w:p><w:p w14:paraId="02A9A7AD" w14:textId="77777777" w:rsidR="00237049" w:rsidRDefault="00237049" w:rsidP="00970260"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr></w:p><w:p w14:paraId="2260D7D9" w14:textId="77777777" w:rsidR="00237049" w:rsidRDefault="00237049" w:rsidP="00970260"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr></w:p><w:p w14:paraId="3ECEB177" w14:textId="77777777" w:rsidR="00237049" w:rsidRPr="00237049" w:rsidRDefault="00237049" w:rsidP="00237049"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="00237049"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>Таблица проблем и решений</w:t></w:r></w:p><w:p w14:paraId="1AAD406E" w14:textId="77777777" w:rsidR="00237049" w:rsidRDefault="00237049" w:rsidP="00970260"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr></w:p><w:p w14:paraId="63F32D9E" w14:textId="77777777" w:rsidR="00237049" w:rsidRPr="00970260" w:rsidRDefault="00237049" w:rsidP="00970260"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr></w:p><w:tbl><w:tblPr><w:tblStyle w:val="TableGrid"/><w:tblW w:w="0" w:type="auto"/><w:tblLook w:val="04A0" w:firstRow="1" w:lastRow="0" w:firstColumn="1" w:lastColumn="0" w:noHBand="0" w:noVBand="1"/></w:tblPr><w:tblGrid><w:gridCol w:w="1513"/><w:gridCol w:w="1640"/><w:gridCol w:w="1995"/><w:gridCol w:w="1594"/><w:gridCol w:w="2274"/></w:tblGrid><w:tr w:rsidR="00970260" w14:paraId="6E50233B" w14:textId="77777777" w:rsidTr="00970260"><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="23C9ADDA" w14:textId="78129EFF" w:rsidR="00970260" w:rsidRDefault="00970260"><w:r w:rsidRPr="00970260"><w:t>Модуль</w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="0B1F3F9E" w14:textId="303C7461" w:rsidR="00970260" w:rsidRDefault="00970260"><w:r w:rsidRPr="00970260"><w:t>Проблема</w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="48D84573" w14:textId="13DFFA17" w:rsidR="00970260" w:rsidRDefault="00970260"><w:r w:rsidRPr="00970260"><w:t>Решение</w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="2BED1755" w14:textId="1C1EBC73" w:rsidR="00970260" w:rsidRDefault="00970260"><w:r w:rsidRPr="00970260"><w:t>Применённый паттерн</w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1804" w:type="dxa"/></w:tcPr><w:p w14:paraId="41A4E774" w14:textId="2A0195AE" w:rsidR="00970260" w:rsidRDefault="00970260"><w:r w:rsidRPr="00970260"><w:t>Эффект</w:t></w:r></w:p></w:tc></w:tr><w:tr w:rsidR="00970260" w:rsidRPr="00970260" w14:paraId="4BAC3F09" w14:textId="77777777" w:rsidTr="00970260"><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="13648353" w14:textId="5899369D" w:rsidR="00970260" w:rsidRDefault="00970260"><w:r w:rsidRPr="00970260"><w:t xml:space="preserve">rust_iss </w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="120EC86B" w14:textId="3466E51C" w:rsidR="00970260" w:rsidRDefault="00970260"><w:r w:rsidRPr="00970260"><w:t>Монолитный код в main.rs, нет разделения слоёв</w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="5C2B6C5D" w14:textId="1A395082" w:rsidR="00970260" w:rsidRPr="001D356A" w:rsidRDefault="00970260"><w:pPr><w:rPr><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00970260"><w:t>Создана</w:t></w:r><w:r w:rsidRPr="00970260"><w:rPr><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00970260"><w:t>слоистая</w:t></w:r><w:r w:rsidRPr="00970260"><w:rPr><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00970260"><w:t>архитектура</w:t></w:r><w:r w:rsidRPr="00970260"><w:rPr><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">: routes/, handlers/, services/, clients/, </w:t></w:r><w:r w:rsidRPr="00970260"><w:rPr><w:lang w:val="en-US"/></w:rPr><w:lastRenderedPageBreak/><w:t xml:space="preserve">repo/, domain/, config/ </w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="5E5C9F4B" w14:textId="77777777" w:rsidR="00970260" w:rsidRPr="00970260" w:rsidRDefault="00970260" w:rsidP="00970260"><w:pPr><w:rPr><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00970260"><w:rPr><w:lang w:val="en-US"/></w:rPr><w:lastRenderedPageBreak/><w:t xml:space="preserve">Layered Architecture, Repository Pattern, Dependency Injection </w:t></w:r></w:p><w:p w14:paraId="08E90E2B" w14:textId="77777777" w:rsidR="00970260" w:rsidRPr="00970260" w:rsidRDefault="00970260"><w:pPr><w:rPr><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1804" w:type="dxa"/></w:tcPr><w:p w14:paraId="6FD14E0D" w14:textId="01D16003" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00237049"><w:r w:rsidRPr="001D356A"><w:rPr><w:lang w:val="en-US"/></w:rPr><w:lastRenderedPageBreak/><w:t> </w:t></w:r><w:r w:rsidRPr="00237049"><w:t xml:space="preserve">Улучшена тестируемость, поддерживаемость, расширяемость </w:t></w:r></w:p></w:tc></w:tr><w:tr w:rsidR="00970260" w:rsidRPr="00237049" w14:paraId="1BBAE5E9" w14:textId="77777777" w:rsidTr="00970260"><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="29FB0EEB" w14:textId="35B524F9" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00237049"><w:r w:rsidRPr="00237049"><w:t xml:space="preserve"> rust_iss </w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="1F780E43" w14:textId="75E1CFCC" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00237049"><w:r w:rsidRPr="00237049"><w:t xml:space="preserve">Нет единого формата ошибок, всегда возвращаются HTTP коды </w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="5BC7DF5A" w14:textId="55BFF347" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00237049"><w:r w:rsidRPr="00237049"><w:t xml:space="preserve">Внедрён единый формат {ok: bool, error: {code, message, trace_id}}, всегда HTTP 200 </w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="1A77C244" w14:textId="77777777" w:rsidR="00237049" w:rsidRPr="00237049" w:rsidRDefault="00237049" w:rsidP="00237049"><w:r w:rsidRPr="00237049"><w:t xml:space="preserve">Error Handling Pattern, Structured Errors </w:t></w:r></w:p><w:p w14:paraId="1DD076AF" w14:textId="77777777" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00970260"/></w:tc><w:tc><w:tcPr><w:tcW w:w="1804" w:type="dxa"/></w:tcPr><w:p w14:paraId="499881E9" w14:textId="77777777" w:rsidR="00237049" w:rsidRPr="00237049" w:rsidRDefault="00237049" w:rsidP="00237049"><w:r w:rsidRPr="00237049"><w:t xml:space="preserve">Предсказуемость API, лучшая диагностика ошибок </w:t></w:r></w:p><w:p w14:paraId="6165DC22" w14:textId="77777777" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00970260"/></w:tc></w:tr><w:tr w:rsidR="00970260" w:rsidRPr="00237049" w14:paraId="3668DAF1" w14:textId="77777777" w:rsidTr="00970260"><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="6C12E226" w14:textId="63FE6BCE" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00237049"><w:r w:rsidRPr="00237049"><w:t>rust_iss</w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="2B7AC916" w14:textId="0E0AF387" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00237049"><w:r w:rsidRPr="00237049"><w:t xml:space="preserve"> SQL запросы в хендлерах </w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="20811F72" w14:textId="1A09C7FB" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00237049"><w:r w:rsidRPr="00237049"><w:t xml:space="preserve">Выделены репозитории: IssRepo, OsdrRepo, CacheRepo </w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="09DE6982" w14:textId="77777777" w:rsidR="00237049" w:rsidRPr="00237049" w:rsidRDefault="00237049" w:rsidP="00237049"><w:r w:rsidRPr="00237049"><w:t>Repository Pattern</w:t></w:r></w:p><w:p w14:paraId="14A012B6" w14:textId="77777777" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00970260"/></w:tc><w:tc><w:tcPr><w:tcW w:w="1804" w:type="dxa"/></w:tcPr><w:p w14:paraId="1A1F236B" w14:textId="645EAFB5" w:rsidR="00237049" w:rsidRPr="00237049" w:rsidRDefault="00237049" w:rsidP="00237049"><w:r w:rsidRPr="00237049"><w:t>Разделение ответственности</w:t></w:r></w:p><w:p w14:paraId="5BFA8FBB" w14:textId="77777777" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00970260"/></w:tc></w:tr><w:tr w:rsidR="00970260" w:rsidRPr="00237049" w14:paraId="5E9CEED2" w14:textId="77777777" w:rsidTr="00970260"><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="6FA41981" w14:textId="169CD7CB" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00237049"><w:r w:rsidRPr="00237049"><w:t>rust_iss</w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="05734E6C" w14:textId="0612883B" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00237049"><w:r w:rsidRPr="00237049"><w:t>Нет защиты от наложения фоновых задач</w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="33942FB8" w14:textId="1000F563" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00237049"><w:r w:rsidRPr="00237049"><w:t xml:space="preserve"> PostgreSQL Advisory Locks для каждого планировщика </w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="1ECC5CDE" w14:textId="77777777" w:rsidR="00237049" w:rsidRPr="00237049" w:rsidRDefault="00237049" w:rsidP="00237049"><w:r w:rsidRPr="00237049"><w:t xml:space="preserve">Advisory Lock Pattern </w:t></w:r></w:p><w:p w14:paraId="56F77F4F" w14:textId="77777777" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00970260"/></w:tc><w:tc><w:tcPr><w:tcW w:w="1804" w:type="dxa"/></w:tcPr><w:p w14:paraId="6FDBCEE4" w14:textId="3342004E" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00237049"><w:r w:rsidRPr="00237049"><w:t>Предотвращение дублирования задач при масштабировании</w:t></w:r></w:p></w:tc></w:tr><w:tr w:rsidR="00970260" w:rsidRPr="00237049" w14:paraId="0E743C7F" w14:textId="77777777" w:rsidTr="00970260"><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="4582E101" w14:textId="60C17423" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00237049"><w:r w:rsidRPr="00237049"><w:t>rust_iss</w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="48FEC0B9" w14:textId="7E3970AB" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00237049"><w:r w:rsidRPr="00237049"><w:t xml:space="preserve">Нет retry логики для внешних API </w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="70345F7B" w14:textId="230D48E9" w:rsidR="00970260" w:rsidRPr="001D356A" w:rsidRDefault="00237049"><w:pPr><w:rPr><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00237049"><w:t>Реализованы</w:t></w:r><w:r w:rsidRPr="00237049"><w:rPr><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> retries </w:t></w:r><w:r w:rsidRPr="00237049"><w:t>с</w:t></w:r><w:r w:rsidRPr="00237049"><w:rPr><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> exponential backoff </w:t></w:r><w:r w:rsidRPr="00237049"><w:t>в</w:t></w:r><w:r w:rsidRPr="00237049"><w:rPr><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> HttpClient </w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="00355E63" w14:textId="77777777" w:rsidR="00237049" w:rsidRPr="00237049" w:rsidRDefault="00237049" w:rsidP="00237049"><w:r w:rsidRPr="00237049"><w:t xml:space="preserve">Retry Pattern, Circuit Breaker </w:t></w:r></w:p><w:p w14:paraId="243FEF91" w14:textId="77777777" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00970260"><w:pPr><w:rPr><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1804" w:type="dxa"/></w:tcPr><w:p w14:paraId="11D1E6C9" w14:textId="77777777" w:rsidR="00237049" w:rsidRPr="00237049" w:rsidRDefault="00237049" w:rsidP="00237049"><w:r w:rsidRPr="00237049"><w:t>Повышение надёжности при временных сбоях</w:t></w:r></w:p><w:p w14:paraId="43D64725" w14:textId="77777777" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00970260"><w:pPr><w:rPr><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p></w:tc></w:tr><w:tr w:rsidR="00970260" w:rsidRPr="00237049" w14:paraId="50049874" w14:textId="77777777" w:rsidTr="00970260"><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="1C4196C0" w14:textId="786116F5" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00237049"><w:r w:rsidRPr="00237049"><w:t xml:space="preserve">php_web </w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="1B410996" w14:textId="4091675D" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00237049"><w:r w:rsidRPr="00237049"><w:t>Бизнес-логика в контроллерах</w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="29197E0F" w14:textId="3BAA90DD" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00237049"><w:pPr><w:rPr><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00237049"><w:t>Выделен</w:t></w:r><w:r w:rsidRPr="00237049"><w:rPr><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> Service Layer: ExternalApiService, IssService, OsdrService, CmsService </w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="6245222D" w14:textId="77777777" w:rsidR="00237049" w:rsidRPr="00237049" w:rsidRDefault="00237049" w:rsidP="00237049"><w:r w:rsidRPr="00237049"><w:t>Service Layer Pattern</w:t></w:r></w:p><w:p w14:paraId="5205D2A0" w14:textId="77777777" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00970260"><w:pPr><w:rPr><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1804" w:type="dxa"/></w:tcPr><w:p w14:paraId="446E2169" w14:textId="3CFF0F02" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00237049"><w:r w:rsidRPr="00237049"><w:t>Улучшена читаемость, тестируемость, повторное использование</w:t></w:r></w:p></w:tc></w:tr><w:tr w:rsidR="00970260" w:rsidRPr="00237049" w14:paraId="7988EE21" w14:textId="77777777" w:rsidTr="00970260"><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="260F428E" w14:textId="77777777" w:rsidR="00237049" w:rsidRPr="00237049" w:rsidRDefault="00237049" w:rsidP="00237049"><w:r w:rsidRPr="00237049"><w:t xml:space="preserve">php_web </w:t></w:r></w:p><w:p w14:paraId="5B5975C7" w14:textId="77777777" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00970260"><w:pPr><w:rPr><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="120832C1" w14:textId="3342E269" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00237049"><w:r w:rsidRPr="00237049"><w:t xml:space="preserve">SQL запросы в Blade шаблонах </w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="5F8FD953" w14:textId="74F7F527" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00237049"><w:r w:rsidRPr="00237049"><w:t xml:space="preserve">Удалены прямые SQL запросы, используются ViewModels и сервисы </w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="48B108E3" w14:textId="77777777" w:rsidR="00237049" w:rsidRPr="00237049" w:rsidRDefault="00237049" w:rsidP="00237049"><w:r w:rsidRPr="00237049"><w:t>ViewModel Pattern, Separation of Concerns</w:t></w:r></w:p><w:p w14:paraId="2C911C5F" w14:textId="77777777" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00970260"/></w:tc><w:tc><w:tcPr><w:tcW w:w="1804" w:type="dxa"/></w:tcPr><w:p w14:paraId="5584C8F3" w14:textId="77777777" w:rsidR="00237049" w:rsidRPr="00237049" w:rsidRDefault="00237049" w:rsidP="00237049"><w:r w:rsidRPr="00237049"><w:t>Безопасность, производительность, поддерживаемость</w:t></w:r></w:p><w:p w14:paraId="55FA2C78" w14:textId="77777777" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00970260"/></w:tc></w:tr><w:tr w:rsidR="00970260" w:rsidRPr="00237049" w14:paraId="21B0FE9D" w14:textId="77777777" w:rsidTr="00970260"><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="15244F78" w14:textId="31C6B0B5" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00237049"><w:r w:rsidRPr="00237049"><w:t>php_web</w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="2D095C3A" w14:textId="7F6F28F2" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00237049"><w:r w:rsidRPr="00237049"><w:t xml:space="preserve">Нет кэширования внешних запросов </w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="5B23E84C" w14:textId="1B04B188" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00237049"><w:r w:rsidRPr="00237049"><w:t xml:space="preserve">Добавлено кэширование в ExternalApiService с настраиваемым TTL </w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="5009606B" w14:textId="77777777" w:rsidR="00237049" w:rsidRPr="00237049" w:rsidRDefault="00237049" w:rsidP="00237049"><w:r w:rsidRPr="00237049"><w:t xml:space="preserve">Caching Pattern </w:t></w:r></w:p><w:p w14:paraId="0B93938A" w14:textId="77777777" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00970260"/></w:tc><w:tc><w:tcPr><w:tcW w:w="1804" w:type="dxa"/></w:tcPr><w:p w14:paraId="15A9B16B" w14:textId="77777777" w:rsidR="00237049" w:rsidRPr="00237049" w:rsidRDefault="00237049" w:rsidP="00237049"><w:r w:rsidRPr="00237049"><w:t xml:space="preserve">Снижение нагрузки на внешние API, улучшение производительности </w:t></w:r></w:p><w:p w14:paraId="378FC623" w14:textId="77777777" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00970260"/></w:tc></w:tr><w:tr w:rsidR="00970260" w:rsidRPr="00237049" w14:paraId="412E2F64" w14:textId="77777777" w:rsidTr="00970260"><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="1E2494F8" w14:textId="1D992D83" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00237049"><w:r w:rsidRPr="00237049"><w:t xml:space="preserve">php_web </w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="7C73AFF4" w14:textId="64B7EBF1" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00237049"><w:r w:rsidRPr="00237049"><w:t xml:space="preserve">Нет валидации и санитизации входных данных </w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="7D3216E0" w14:textId="7593EDC0" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00237049"><w:r w:rsidRPr="00237049"><w:t xml:space="preserve">Добавлена валидация и санитизация в контроллерах </w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="06F11593" w14:textId="77777777" w:rsidR="00237049" w:rsidRPr="00237049" w:rsidRDefault="00237049" w:rsidP="00237049"><w:r w:rsidRPr="00237049"><w:t xml:space="preserve">Input Validation Pattern </w:t></w:r></w:p><w:p w14:paraId="05A49DAB" w14:textId="77777777" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00970260"/></w:tc><w:tc><w:tcPr><w:tcW w:w="1804" w:type="dxa"/></w:tcPr><w:p w14:paraId="029C875F" w14:textId="77777777" w:rsidR="00237049" w:rsidRPr="00237049" w:rsidRDefault="00237049" w:rsidP="00237049"><w:r w:rsidRPr="00237049"><w:t xml:space="preserve">Защита от SQL injection, XSS атак </w:t></w:r></w:p><w:p w14:paraId="17415A34" w14:textId="77777777" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00970260"/></w:tc></w:tr><w:tr w:rsidR="00970260" w:rsidRPr="00237049" w14:paraId="47B0C94F" w14:textId="77777777" w:rsidTr="00970260"><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="23DCF981" w14:textId="11A02557" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00237049"><w:r w:rsidRPr="00237049"><w:t>pascal_legacy</w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="6F5C8C19" w14:textId="45C2916D" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00237049"><w:r w:rsidRPr="00237049"><w:t>Устаревший стек (Pascal), нет логирования, нет документации</w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="4C778ACD" w14:textId="28F7A443" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00237049"><w:r w:rsidRPr="00237049"><w:t>Миграция на Go с сохранением контракта, логирование в stdout/stderr, документация</w:t></w:r></w:p></w:tc><w:tc><w:tcPr><w:tcW w:w="1803" w:type="dxa"/></w:tcPr><w:p w14:paraId="7E2C94D6" w14:textId="77777777" w:rsidR="00237049" w:rsidRPr="00237049" w:rsidRDefault="00237049" w:rsidP="00237049"><w:r w:rsidRPr="00237049"><w:t xml:space="preserve">Migration Pattern, Legacy Wrapper </w:t></w:r></w:p><w:p w14:paraId="2114ADB8" w14:textId="77777777" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00970260"/></w:tc><w:tc><w:tcPr><w:tcW w:w="1804" w:type="dxa"/></w:tcPr><w:p w14:paraId="4C9D24A0" w14:textId="77777777" w:rsidR="00237049" w:rsidRPr="00237049" w:rsidRDefault="00237049" w:rsidP="00237049"><w:r w:rsidRPr="00237049"><w:t>Современный стек, улучшенная поддерживаемость</w:t></w:r></w:p><w:p w14:paraId="31593E1E" w14:textId="77777777" w:rsidR="00970260" w:rsidRPr="00237049" w:rsidRDefault="00970260"/></w:tc></w:tr></w:tbl><w:p w14:paraId="4D7C090B" w14:textId="77777777" w:rsidR="009A1F1A" w:rsidRDefault="009A1F1A" w:rsidP="00237049"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr></w:p><w:p w14:paraId="1772E73C" w14:textId="61B73BBF" w:rsidR="00237049" w:rsidRPr="00237049" w:rsidRDefault="00237049" w:rsidP="00237049"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="00237049"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:lastRenderedPageBreak/><w:t>Архитектурные улучшения</w:t></w:r></w:p><w:p w14:paraId="364A7C77" w14:textId="77777777" w:rsidR="00237049" w:rsidRDefault="00237049"/><w:p w14:paraId="5F3ADB9B" w14:textId="77777777" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:r w:rsidRPr="00B26C44"><w:t>rust-iss/</w:t></w:r></w:p><w:p w14:paraId="7007B4FA" w14:textId="77777777" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="MS Gothic" w:eastAsia="MS Gothic" w:hAnsi="MS Gothic" w:cs="MS Gothic" w:hint="eastAsia"/></w:rPr><w:t>├</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>──</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> src/</w:t></w:r></w:p><w:p w14:paraId="72B6DBB2" w14:textId="0D25489B" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve">│   </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="MS Gothic" w:eastAsia="MS Gothic" w:hAnsi="MS Gothic" w:cs="MS Gothic" w:hint="eastAsia"/></w:rPr><w:t>├</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>──</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> main.rs </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>Инициализация</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>и</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>запуск</w:t></w:r></w:p><w:p w14:paraId="6C1725AF" w14:textId="6A5F1B7A" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve">│   </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="MS Gothic" w:eastAsia="MS Gothic" w:hAnsi="MS Gothic" w:cs="MS Gothic" w:hint="eastAsia"/></w:rPr><w:t>├</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>──</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> config.rs </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>Конфигурация</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>из</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> env</w:t></w:r></w:p><w:p w14:paraId="4F0DABAD" w14:textId="5DAE07DC" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve">│   </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="MS Gothic" w:eastAsia="MS Gothic" w:hAnsi="MS Gothic" w:cs="MS Gothic" w:hint="eastAsia"/></w:rPr><w:t>├</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>──</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> domain.rs </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>Доменные</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>модели</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>и</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>типы</w:t></w:r></w:p><w:p w14:paraId="5A7FE47D" w14:textId="68FCBB04" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve">│   </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="MS Gothic" w:eastAsia="MS Gothic" w:hAnsi="MS Gothic" w:cs="MS Gothic" w:hint="eastAsia"/></w:rPr><w:t>├</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>──</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> error.rs </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>Единый</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>формат</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>ошибок</w:t></w:r></w:p><w:p w14:paraId="776D64AD" w14:textId="429F678A" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve">│   </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="MS Gothic" w:eastAsia="MS Gothic" w:hAnsi="MS Gothic" w:cs="MS Gothic" w:hint="eastAsia"/></w:rPr><w:t>├</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>──</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> repo.rs </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>Репозитории</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> (IssRepo, OsdrRepo, CacheRepo)</w:t></w:r></w:p><w:p w14:paraId="3ABC35D0" w14:textId="7853DFDD" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve">│   </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="MS Gothic" w:eastAsia="MS Gothic" w:hAnsi="MS Gothic" w:cs="MS Gothic" w:hint="eastAsia"/></w:rPr><w:t>├</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>──</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> clients.rs </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve">  HTTP </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>клиенты</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>для</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>внешних</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> API</w:t></w:r></w:p><w:p w14:paraId="616934DE" w14:textId="44C00D1B" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve">│   </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="MS Gothic" w:eastAsia="MS Gothic" w:hAnsi="MS Gothic" w:cs="MS Gothic" w:hint="eastAsia"/></w:rPr><w:t>├</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>──</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> services.rs </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>Бизнес</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t>-</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>логика</w:t></w:r></w:p><w:p w14:paraId="1C1E0D5B" w14:textId="16C3AD56" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve">│   </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="MS Gothic" w:eastAsia="MS Gothic" w:hAnsi="MS Gothic" w:cs="MS Gothic" w:hint="eastAsia"/></w:rPr><w:t>├</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>──</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> handlers.rs </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> HTTP </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>обработчики</w:t></w:r></w:p><w:p w14:paraId="47F31454" w14:textId="6BDD7EA0" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve">│   </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="MS Gothic" w:eastAsia="MS Gothic" w:hAnsi="MS Gothic" w:cs="MS Gothic" w:hint="eastAsia"/></w:rPr><w:t>├</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>──</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> routes.rs </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>Маршрутизация</w:t></w:r></w:p><w:p w14:paraId="535FC42A" w14:textId="2B4FBDC8" w:rsidR="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:r w:rsidRPr="00B26C44"><w:t>│   └── app_state.rs      Состояние приложения (DI)</w:t></w:r></w:p><w:p w14:paraId="35C5626B" w14:textId="77777777" w:rsidR="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"/><w:p w14:paraId="4941D4EF" w14:textId="77777777" w:rsidR="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"/><w:p w14:paraId="2257727F" w14:textId="2ECA8A9E" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Ключевые улучшения:</w:t></w:r></w:p><w:p w14:paraId="0FD049BB" w14:textId="53EE624E" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t xml:space="preserve">1. </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Единый формат ошибок</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>: Все ошибки возвращаются как `{ok: false, error: {code, message, trace_id}}`, HTTP всегда 200</w:t></w:r></w:p><w:p w14:paraId="44A94B5F" w14:textId="23006DE7" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t xml:space="preserve">2. </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Repository Pattern</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>: Все SQL запросы изолированы в репозиториях</w:t></w:r></w:p><w:p w14:paraId="2DBD5D72" w14:textId="4919FBA1" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t xml:space="preserve">3. </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>PostgreSQL Advisory Locks</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>: Защита от наложения фоновых задач</w:t></w:r></w:p><w:p w14:paraId="54B6A166" w14:textId="2FE61528" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t xml:space="preserve">4. </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Retry логика</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>: Автоматические повторные попытки с exponential backoff</w:t></w:r></w:p><w:p w14:paraId="7D5AAEBA" w14:textId="44F93D4B" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t xml:space="preserve">5. </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Типизация</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>: Правильная работа с TIMESTAMPTZ через `DateTime&lt;Utc&gt;`</w:t></w:r></w:p><w:p w14:paraId="1AEE0C42" w14:textId="3274BF7F" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t xml:space="preserve">6. </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Upsert по бизнес-ключам</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>: Используется `ON CONFLICT` для обновления существующих записей</w:t></w:r></w:p><w:p w14:paraId="39590F07" w14:textId="77777777" w:rsidR="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"/><w:p w14:paraId="7FD18863" w14:textId="77777777" w:rsidR="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"/><w:p w14:paraId="33AD105F" w14:textId="243A1142" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:pPr><w:rPr><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="001D356A"><w:rPr><w:b/><w:bCs/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:b/><w:bCs/><w:lang w:val="en-US"/></w:rPr><w:t>PHP Web Service</w:t></w:r></w:p><w:p w14:paraId="7D697CAE" w14:textId="386C39D7" w:rsidR="00B26C44" w:rsidRPr="001D356A" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:pPr><w:rPr><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00B26C44"><w:rPr><w:b/><w:bCs/><w:lang w:val="en-US"/></w:rPr><w:t>Service Layer Pattern</w:t></w:r></w:p><w:p w14:paraId="52E12901" w14:textId="77777777" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:pPr><w:rPr><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00B26C44"><w:rPr><w:lang w:val="en-US"/></w:rPr><w:t>app/</w:t></w:r></w:p><w:p w14:paraId="22EEE6B4" w14:textId="77777777" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:pPr><w:rPr><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="MS Gothic" w:eastAsia="MS Gothic" w:hAnsi="MS Gothic" w:cs="MS Gothic" w:hint="eastAsia"/><w:lang w:val="en-US"/></w:rPr><w:t>├</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/><w:lang w:val="en-US"/></w:rPr><w:t>──</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> Services/</w:t></w:r></w:p><w:p w14:paraId="42154AFA" w14:textId="7E55A2ED" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:pPr><w:rPr><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00B26C44"><w:rPr><w:lang w:val="en-US"/></w:rPr><w:lastRenderedPageBreak/><w:t xml:space="preserve">│   </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="MS Gothic" w:eastAsia="MS Gothic" w:hAnsi="MS Gothic" w:cs="MS Gothic" w:hint="eastAsia"/><w:lang w:val="en-US"/></w:rPr><w:t>├</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/><w:lang w:val="en-US"/></w:rPr><w:t>──</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> ExternalApiService.php </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/><w:lang w:val="en-US"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">  </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>Единый</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>клиент</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>для</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>внешних</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> API</w:t></w:r></w:p><w:p w14:paraId="45EA2C84" w14:textId="460D1118" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve">│   </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="MS Gothic" w:eastAsia="MS Gothic" w:hAnsi="MS Gothic" w:cs="MS Gothic" w:hint="eastAsia"/></w:rPr><w:t>├</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>──</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> IssService.php </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve">  </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>Сервис</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>для</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>работы</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>с</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> ISS</w:t></w:r></w:p><w:p w14:paraId="43BA99AC" w14:textId="2143EDF8" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve">│   </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="MS Gothic" w:eastAsia="MS Gothic" w:hAnsi="MS Gothic" w:cs="MS Gothic" w:hint="eastAsia"/></w:rPr><w:t>├</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>──</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> OsdrService.php </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>Сервис</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>для</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>работы</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>с</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> OSDR</w:t></w:r></w:p><w:p w14:paraId="68A62D87" w14:textId="2810A2D8" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:r w:rsidRPr="00B26C44"><w:t>│   └── CmsService.php            Сервис для CMS</w:t></w:r></w:p><w:p w14:paraId="4A2D9046" w14:textId="77777777" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="MS Gothic" w:eastAsia="MS Gothic" w:hAnsi="MS Gothic" w:cs="MS Gothic" w:hint="eastAsia"/></w:rPr><w:t>├</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>──</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> ViewModels/</w:t></w:r></w:p><w:p w14:paraId="5104AD6A" w14:textId="106C5BF6" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve">│   </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="MS Gothic" w:eastAsia="MS Gothic" w:hAnsi="MS Gothic" w:cs="MS Gothic" w:hint="eastAsia"/></w:rPr><w:t>├</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>──</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> DashboardViewModel.php </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t> </w:t></w:r><w:r><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>Модель</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>представления</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>для</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:rFonts w:ascii="Aptos" w:hAnsi="Aptos" w:cs="Aptos"/></w:rPr><w:t>дашборда</w:t></w:r></w:p><w:p w14:paraId="3B7D8922" w14:textId="0C82DE83" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:r w:rsidRPr="00B26C44"><w:t>│   └── OsdrViewModel.php         Модель представления для OSDR</w:t></w:r></w:p><w:p w14:paraId="5A02BE15" w14:textId="77777777" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:r w:rsidRPr="00B26C44"><w:t>└── Http/Controllers/</w:t></w:r></w:p><w:p w14:paraId="36431893" w14:textId="578460D0" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:r w:rsidRPr="00B26C44"><w:t>    └── ...                      Тонкие контроллеры</w:t></w:r></w:p><w:p w14:paraId="47129D4A" w14:textId="4995219C" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"/><w:p w14:paraId="6B1BDE2E" w14:textId="35DA7DC5" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:r w:rsidRPr="00B26C44"><w:rPr><w:b/><w:bCs/></w:rPr><w:t xml:space="preserve"> Улучшения производительности</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t>:</w:t></w:r></w:p><w:p w14:paraId="27276E11" w14:textId="2140B840" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve">1. </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Кэширование</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t>: ExternalApiService кэширует ответы внешних API</w:t></w:r></w:p><w:p w14:paraId="2EB6569F" w14:textId="7601245D" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve">2. </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Убраны SQL из Blade</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t>: Все запросы выполняются в сервисах</w:t></w:r></w:p><w:p w14:paraId="2425E070" w14:textId="72DE070C" w:rsidR="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"><w:r w:rsidRPr="00B26C44"><w:t xml:space="preserve">3. </w:t></w:r><w:r w:rsidRPr="00B26C44"><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Оптимизация запросов</w:t></w:r><w:r w:rsidRPr="00B26C44"><w:t>: Использование индексов, подготовленные запросы</w:t></w:r></w:p><w:p w14:paraId="18DDF0C6" w14:textId="77777777" w:rsidR="00D1313A" w:rsidRDefault="00D1313A" w:rsidP="00B26C44"/><w:p w14:paraId="165F04F7" w14:textId="4132A274" w:rsidR="00D1313A" w:rsidRPr="00D1313A" w:rsidRDefault="00D1313A" w:rsidP="00D1313A"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Проблемы Pascal версии</w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>:</w:t></w:r></w:p><w:p w14:paraId="564E4787" w14:textId="0C4C9628" w:rsidR="00D1313A" w:rsidRPr="00D1313A" w:rsidRDefault="00D1313A" w:rsidP="00D1313A"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="4"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Устаревший стек, сложная поддержка</w:t></w:r></w:p><w:p w14:paraId="141AF10B" w14:textId="26EB7C47" w:rsidR="00D1313A" w:rsidRPr="00D1313A" w:rsidRDefault="00D1313A" w:rsidP="00D1313A"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="4"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Нет явного расписания (cron)</w:t></w:r></w:p><w:p w14:paraId="689DF528" w14:textId="4D9F445A" w:rsidR="00D1313A" w:rsidRPr="00D1313A" w:rsidRDefault="00D1313A" w:rsidP="00D1313A"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="4"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Логирование не структурировано</w:t></w:r></w:p><w:p w14:paraId="0ED2E849" w14:textId="30F79AAB" w:rsidR="00D1313A" w:rsidRPr="00D1313A" w:rsidRDefault="00D1313A" w:rsidP="00D1313A"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="4"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Нет обработки ошибок</w:t></w:r></w:p><w:p w14:paraId="4C25E973" w14:textId="77777777" w:rsidR="00D1313A" w:rsidRPr="00D1313A" w:rsidRDefault="00D1313A" w:rsidP="00D1313A"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr></w:p><w:p w14:paraId="6579ABB4" w14:textId="4FE88DAB" w:rsidR="00D1313A" w:rsidRPr="00D1313A" w:rsidRDefault="00D1313A" w:rsidP="00D1313A"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Решение на Go</w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>:</w:t></w:r></w:p><w:p w14:paraId="07BD0ACF" w14:textId="27295433" w:rsidR="00D1313A" w:rsidRPr="00D1313A" w:rsidRDefault="00D1313A" w:rsidP="00D1313A"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="3"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Современный стек, простота поддержки</w:t></w:r></w:p><w:p w14:paraId="7A5468AF" w14:textId="379604C3" w:rsidR="00D1313A" w:rsidRPr="00D1313A" w:rsidRDefault="00D1313A" w:rsidP="00D1313A"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="3"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Явный entrypoint, настраиваемый период через env</w:t></w:r></w:p><w:p w14:paraId="1340F857" w14:textId="11416C28" w:rsidR="00D1313A" w:rsidRPr="00D1313A" w:rsidRDefault="00D1313A" w:rsidP="00D1313A"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="3"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Логирование в stdout/stderr (структурированное)</w:t></w:r></w:p><w:p w14:paraId="3E83D156" w14:textId="554514D1" w:rsidR="00D1313A" w:rsidRPr="00D1313A" w:rsidRDefault="00D1313A" w:rsidP="00D1313A"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="3"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>PostgreSQL Advisory Locks для предотвращения наложения</w:t></w:r></w:p><w:p w14:paraId="62029EC4" w14:textId="4F8950C3" w:rsidR="00D1313A" w:rsidRPr="00D1313A" w:rsidRDefault="00D1313A" w:rsidP="00D1313A"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="3"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Graceful shutdown</w:t></w:r></w:p><w:p w14:paraId="33460361" w14:textId="77777777" w:rsidR="00D1313A" w:rsidRPr="00B26C44" w:rsidRDefault="00D1313A" w:rsidP="00B26C44"/><w:p w14:paraId="1A2C6D2B" w14:textId="77777777" w:rsidR="00D1313A" w:rsidRPr="00D1313A" w:rsidRDefault="00D1313A" w:rsidP="00D1313A"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Безопасность</w:t></w:r></w:p><w:p w14:paraId="31FE2114" w14:textId="3DC8B983" w:rsidR="00D1313A" w:rsidRPr="00D1313A" w:rsidRDefault="00D1313A" w:rsidP="00D1313A"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Внедрённые улучшения</w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>:</w:t></w:r></w:p><w:p w14:paraId="7D47CAF0" w14:textId="47BE5A66" w:rsidR="00D1313A" w:rsidRPr="00D1313A" w:rsidRDefault="00D1313A" w:rsidP="00D1313A"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t xml:space="preserve">1. </w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>XSS защита</w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>: `htmlspecialchars()` для всех пользовательских данных в Blade</w:t></w:r></w:p><w:p w14:paraId="46414EC0" w14:textId="7F7DFEE8" w:rsidR="00D1313A" w:rsidRPr="00D1313A" w:rsidRDefault="00D1313A" w:rsidP="00D1313A"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t xml:space="preserve">2. </w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>CSRF защита</w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>: Включен VerifyCsrfToken middleware</w:t></w:r></w:p><w:p w14:paraId="5276F570" w14:textId="7D39E6A2" w:rsidR="00D1313A" w:rsidRPr="00D1313A" w:rsidRDefault="00D1313A" w:rsidP="00D1313A"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t xml:space="preserve">3. </w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>SQL Injection</w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>: Использование подготовленных запросов (parameterized queries)</w:t></w:r></w:p><w:p w14:paraId="38B2B3C9" w14:textId="5F335A00" w:rsidR="00D1313A" w:rsidRPr="00D1313A" w:rsidRDefault="00D1313A" w:rsidP="00D1313A"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:lastRenderedPageBreak/><w:t xml:space="preserve">4. </w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Input Validation</w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>: Валидация и санитизация всех входных параметров</w:t></w:r></w:p><w:p w14:paraId="5B3A5F24" w14:textId="77777777" w:rsidR="00D1313A" w:rsidRPr="00D1313A" w:rsidRDefault="00D1313A" w:rsidP="00D1313A"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr></w:p><w:p w14:paraId="02CFF48B" w14:textId="3D7D21B5" w:rsidR="00D1313A" w:rsidRPr="00D1313A" w:rsidRDefault="00D1313A" w:rsidP="00D1313A"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Производительность</w:t></w:r></w:p><w:p w14:paraId="3ABD6B25" w14:textId="3530ED30" w:rsidR="00D1313A" w:rsidRPr="00D1313A" w:rsidRDefault="00D1313A" w:rsidP="00D1313A"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Кэширование:</w:t></w:r></w:p><w:p w14:paraId="795F3A19" w14:textId="34A611E8" w:rsidR="00D1313A" w:rsidRPr="00D1313A" w:rsidRDefault="00D1313A" w:rsidP="00D1313A"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="5"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>ExternalApiService</w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>: Кэширование ответов внешних API с настраиваемым TTL</w:t></w:r></w:p><w:p w14:paraId="5544CF09" w14:textId="24A14586" w:rsidR="00D1313A" w:rsidRPr="00D1313A" w:rsidRDefault="00D1313A" w:rsidP="00D1313A"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="5"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>CmsService</w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>: Кэширование CMS страниц на 1 час</w:t></w:r></w:p><w:p w14:paraId="4BC77325" w14:textId="340E3BED" w:rsidR="00D1313A" w:rsidRPr="00D1313A" w:rsidRDefault="00D1313A" w:rsidP="00D1313A"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="5"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>PostgreSQL</w:t></w:r><w:r w:rsidRPr="00D1313A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>: Использование индексов для быстрого поиска</w:t></w:r></w:p><w:p w14:paraId="7E2F8DD7" w14:textId="77777777" w:rsidR="00B26C44" w:rsidRPr="00B26C44" w:rsidRDefault="00B26C44" w:rsidP="00B26C44"/><w:p w14:paraId="40550EC6" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>Детальные изменения в коде</w:t></w:r></w:p><w:p w14:paraId="46D9CA96" w14:textId="6A3E3939" w:rsidR="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t> 1. src/main.rs</w:t></w:r></w:p><w:p w14:paraId="7EEA52C5" w14:textId="590B067A" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>ДО РЕФАКТОРИНГА - всё в файле main.rs</w:t></w:r></w:p><w:p w14:paraId="7E763B16" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>#[derive(Clone)]</w:t></w:r></w:p><w:p w14:paraId="18C5AE03" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>struct AppState {</w:t></w:r></w:p><w:p w14:paraId="72B155AB" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    pool: PgPool,</w:t></w:r></w:p><w:p w14:paraId="18308440" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    nasa_url: String,</w:t></w:r></w:p><w:p w14:paraId="184E39EF" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    nasa_key: String,</w:t></w:r></w:p><w:p w14:paraId="0C113F86" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    fallback_url: String,</w:t></w:r></w:p><w:p w14:paraId="0CBEA5EA" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    every_osdr: u64,</w:t></w:r></w:p><w:p w14:paraId="08EFB842" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>every_iss: u64,</w:t></w:r></w:p><w:p w14:paraId="6F7C82EE" w14:textId="0DDD5F1C" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t xml:space="preserve">    // ... </w:t></w:r></w:p><w:p w14:paraId="16B7E531" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="27E03EAD" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="60D13D53" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>#[tokio::main]</w:t></w:r></w:p><w:p w14:paraId="562A881F" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>async fn main() -&gt; anyhow::Result&lt;()&gt; {</w:t></w:r></w:p><w:p w14:paraId="38B4E77A" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>// Прямая загрузка из env без структуры</w:t></w:r></w:p><w:p w14:paraId="0F210179" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>let db_url = std::env::var("DATABASE_URL").expect("DATABASE_URL is required");</w:t></w:r></w:p><w:p w14:paraId="004243BF" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    let nasa_url = std::env::var("NASA_API_URL")</w:t></w:r></w:p><w:p w14:paraId="092DA020" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        .unwrap_or_else(|_| "https://visualization.osdr.nasa.gov/...".to_string());</w:t></w:r></w:p><w:p w14:paraId="3664A5C6" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="4E385CFC" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    let pool = PgPoolOptions::new().max_connections(5).connect(&amp;db_url).await?;</w:t></w:r></w:p><w:p w14:paraId="635405B6" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="296C12FA" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    // </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>Создание</w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>таблиц</w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>прямо</w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>в</w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> main</w:t></w:r></w:p><w:p w14:paraId="3220BDF7" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:lastRenderedPageBreak/><w:t>    sqlx::query("CREATE TABLE IF NOT EXISTS iss_fetch_log(...)")</w:t></w:r></w:p><w:p w14:paraId="2D24689A" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">        </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>.execute(&amp;pool).await?;</w:t></w:r></w:p><w:p w14:paraId="68CD9470" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="31C48B3E" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>    // Всё в одном состоянии</w:t></w:r></w:p><w:p w14:paraId="5C1E9B58" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>let state = AppState { pool, nasa_url, ... };</w:t></w:r></w:p><w:p w14:paraId="1D3A664C" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="64733797" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>// Фоновые задачи без защиты от наложения</w:t></w:r></w:p><w:p w14:paraId="33288EB9" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>tokio::spawn(async move {</w:t></w:r></w:p><w:p w14:paraId="35F81424" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        loop {</w:t></w:r></w:p><w:p w14:paraId="0929871E" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            fetch_and_store_iss(&amp;state.pool, &amp;state.fallback_url).await;</w:t></w:r></w:p><w:p w14:paraId="19313BCE" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            tokio::time::sleep(Duration::from_secs(120)).await;</w:t></w:r></w:p><w:p w14:paraId="10D00044" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        }</w:t></w:r></w:p><w:p w14:paraId="16A6ED8C" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    });</w:t></w:r></w:p><w:p w14:paraId="1CF3DA38" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="52075F53" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    // </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>Роутер</w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>создан</w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> inline</w:t></w:r></w:p><w:p w14:paraId="7FE0C9D7" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    let app = Router::new()</w:t></w:r></w:p><w:p w14:paraId="6DAC4360" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        .route("/last", get(last_iss))</w:t></w:r></w:p><w:p w14:paraId="04A1A6E6" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        .with_state(state);</w:t></w:r></w:p><w:p w14:paraId="488C841F" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="51B56670" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    axum::serve(listener, app.into_make_service()).await?;</w:t></w:r></w:p><w:p w14:paraId="3727B3F9" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="00AE0D66" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00AE0D66"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="093036C5" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="00AE0D66" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="19B1D8D8" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">// Handlers </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>с</w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> SQL </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>запросами</w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>внутри</w:t></w:r></w:p><w:p w14:paraId="56D88F90" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>async fn last_iss(State(st): State&lt;AppState&gt;)</w:t></w:r></w:p><w:p w14:paraId="4D0870E3" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>-&gt; Result&lt;Json&lt;Value&gt;, (StatusCode, String)&gt; {</w:t></w:r></w:p><w:p w14:paraId="57DF8BAE" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    let row_opt = sqlx::query(</w:t></w:r></w:p><w:p w14:paraId="35FE7C89" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        "SELECT id, fetched_at, source_url, payload</w:t></w:r></w:p><w:p w14:paraId="7EFC63F0" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>         FROM iss_fetch_log ORDER BY id DESC LIMIT 1"</w:t></w:r></w:p><w:p w14:paraId="3392FC07" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    ).fetch_optional(&amp;st.pool).await</w:t></w:r></w:p><w:p w14:paraId="28DB6C8A" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>     .map_err(|e| (StatusCode::INTERNAL_SERVER_ERROR, e.to_string()))?;</w:t></w:r></w:p><w:p w14:paraId="04DFB55D" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="153D725A" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    // </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>Прямая</w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>обработка</w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>данных</w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>в</w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> handler</w:t></w:r></w:p><w:p w14:paraId="715897B2" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:lastRenderedPageBreak/><w:t>    if let Some(row) = row_opt {</w:t></w:r></w:p><w:p w14:paraId="6EC07FEC" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        let id: i64 = row.get("id");</w:t></w:r></w:p><w:p w14:paraId="69F86F1A" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        let fetched_at: DateTime&lt;Utc&gt; = row.get("fetched_at");</w:t></w:r></w:p><w:p w14:paraId="7ACB27B6" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        return Ok(Json(json!({"id": id, "fetched_at": fetched_at})));</w:t></w:r></w:p><w:p w14:paraId="5EBF6734" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    }</w:t></w:r></w:p><w:p w14:paraId="6FE719EB" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    Ok(Json(json!({"message":"no data"})))</w:t></w:r></w:p><w:p w14:paraId="01AA57EF" w14:textId="2B82C50A" w:rsidR="0096375C" w:rsidRPr="00E17422" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="40C5B456" w14:textId="77777777" w:rsidR="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr></w:p><w:p w14:paraId="621779FD" w14:textId="77777777" w:rsidR="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr></w:p><w:p w14:paraId="4C59C4DA" w14:textId="7EFC2E22" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>ПОСЛЕ РЕФАКТОРИНГА - модульная структура</w:t></w:r></w:p><w:p w14:paraId="2AE1AD33" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>mod app_state;</w:t></w:r></w:p><w:p w14:paraId="2EBE3460" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>mod clients;</w:t></w:r></w:p><w:p w14:paraId="51EC1F37" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>mod config;</w:t></w:r></w:p><w:p w14:paraId="6A7660BD" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>mod domain;</w:t></w:r></w:p><w:p w14:paraId="5A6A11BE" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>mod error;</w:t></w:r></w:p><w:p w14:paraId="3237931F" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>mod handlers;</w:t></w:r></w:p><w:p w14:paraId="1913D1B9" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>mod repo;</w:t></w:r></w:p><w:p w14:paraId="2861684C" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>mod routes;</w:t></w:r></w:p><w:p w14:paraId="3DADD2F5" w14:textId="56B8C32B" w:rsidR="0096375C" w:rsidRPr="001D356A" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>mod services;</w:t></w:r></w:p><w:p w14:paraId="5082CB8F" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>#[tokio::main]</w:t></w:r></w:p><w:p w14:paraId="44C7FC86" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>async fn main() -&gt; Result&lt;()&gt; {</w:t></w:r></w:p><w:p w14:paraId="472F76C6" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>    // Инициализация логирования</w:t></w:r></w:p><w:p w14:paraId="02EC5875" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>let subscriber = FmtSubscriber::builder()</w:t></w:r></w:p><w:p w14:paraId="400A41C4" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        .with_env_filter(EnvFilter::from_default_env())</w:t></w:r></w:p><w:p w14:paraId="6489DE0F" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        .finish();</w:t></w:r></w:p><w:p w14:paraId="1818DED6" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    let _ = tracing::subscriber::set_global_default(subscriber);</w:t></w:r></w:p><w:p w14:paraId="0D29751D" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="0A7E83F3" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>dotenvy::dotenv().ok();</w:t></w:r></w:p><w:p w14:paraId="3298AD69" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr></w:p><w:p w14:paraId="26416E76" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>    // Загрузка конфигурации через структурированный Config</w:t></w:r></w:p><w:p w14:paraId="37376C20" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>let config = Config::from_env()?;</w:t></w:r></w:p><w:p w14:paraId="643BD77F" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="66C7151A" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:lastRenderedPageBreak/><w:t xml:space="preserve">    // </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>Инициализация</w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>БД</w:t></w:r></w:p><w:p w14:paraId="7E816AD9" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    let pool = PgPoolOptions::new()</w:t></w:r></w:p><w:p w14:paraId="45ECEFF5" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        .max_connections(config.database.max_connections)</w:t></w:r></w:p><w:p w14:paraId="2DBE5DDA" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        .connect(&amp;config.database.url)</w:t></w:r></w:p><w:p w14:paraId="7B23317C" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        .await?;</w:t></w:r></w:p><w:p w14:paraId="102E5238" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="5C14DEAC" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>init_db(&amp;pool).await?;</w:t></w:r></w:p><w:p w14:paraId="27AF4C65" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr></w:p><w:p w14:paraId="0B12855A" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>    // Инициализация репозиториев</w:t></w:r></w:p><w:p w14:paraId="60928C2F" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>let iss_repo = IssRepo::new(pool.clone());</w:t></w:r></w:p><w:p w14:paraId="7118D3A5" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    let osdr_repo = OsdrRepo::new(pool.clone());</w:t></w:r></w:p><w:p w14:paraId="607C4259" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    let cache_repo = CacheRepo::new(pool.clone());</w:t></w:r></w:p><w:p w14:paraId="1A0A2F45" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="13C422DD" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    // </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>Инициализация</w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> HTTP </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>клиентов</w:t></w:r></w:p><w:p w14:paraId="667A45FC" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    let http_client = HttpClient::new(config.external.clone())?;</w:t></w:r></w:p><w:p w14:paraId="7BDBBC3F" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    let iss_client = IssClient::new(http_client.clone(), config.external.where_iss_url.clone());</w:t></w:r></w:p><w:p w14:paraId="37D1A5B6" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    let nasa_client = NasaClient::new(http_client.clone(), config.external.nasa_url.clone(), config.external.nasa_key.clone());</w:t></w:r></w:p><w:p w14:paraId="00CF1575" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    let spacex_client = SpaceXClient::new(http_client.clone());</w:t></w:r></w:p><w:p w14:paraId="2376D0EB" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="20398FAE" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    // </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>Создание</w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> AppState </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>через</w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> DI</w:t></w:r></w:p><w:p w14:paraId="5B49D00D" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    let state = AppState::new(</w:t></w:r></w:p><w:p w14:paraId="39BF7002" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        iss_repo.clone(),</w:t></w:r></w:p><w:p w14:paraId="0038C077" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        osdr_repo.clone(),</w:t></w:r></w:p><w:p w14:paraId="1C3C5080" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        cache_repo.clone(),</w:t></w:r></w:p><w:p w14:paraId="50E90BFA" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        iss_client.clone(),</w:t></w:r></w:p><w:p w14:paraId="177D5701" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        nasa_client.clone(),</w:t></w:r></w:p><w:p w14:paraId="3E7F8B65" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        spacex_client.clone(),</w:t></w:r></w:p><w:p w14:paraId="3E1366DA" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        config.clone(),</w:t></w:r></w:p><w:p w14:paraId="095D85C7" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="00AE0D66" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="00AE0D66"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>);</w:t></w:r></w:p><w:p w14:paraId="63E1C8D5" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="00AE0D66" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="67E26D4A" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="00AE0D66" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00AE0D66"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00AE0D66"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> // </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>Фоновые</w:t></w:r><w:r w:rsidRPr="00AE0D66"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>задачи</w:t></w:r><w:r w:rsidRPr="00AE0D66"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>с</w:t></w:r><w:r w:rsidRPr="00AE0D66"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>Advisory</w:t></w:r><w:r w:rsidRPr="00AE0D66"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>Locks</w:t></w:r></w:p><w:p w14:paraId="7487AEE2" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="00AE0D66" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00AE0D66"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00AE0D66"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> {</w:t></w:r></w:p><w:p w14:paraId="144D0FBC" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:lastRenderedPageBreak/><w:t> </w:t></w:r><w:r w:rsidRPr="00AE0D66"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00AE0D66"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00AE0D66"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="00AE0D66"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>let osdr_repo = osdr_repo.clone();</w:t></w:r></w:p><w:p w14:paraId="6B616E0B" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        let nasa_client = nasa_client.clone();</w:t></w:r></w:p><w:p w14:paraId="13C79888" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        let pool = pool.clone();</w:t></w:r></w:p><w:p w14:paraId="6B3348AF" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        let interval = config.scheduler.osdr_interval;</w:t></w:r></w:p><w:p w14:paraId="29785304" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        tokio::spawn(async move {</w:t></w:r></w:p><w:p w14:paraId="08159A98" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            let lock_id = 1i64;</w:t></w:r></w:p><w:p w14:paraId="3FD88067" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            loop {</w:t></w:r></w:p><w:p w14:paraId="6FC2B852" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>                tokio::time::sleep(interval).await;</w:t></w:r></w:p><w:p w14:paraId="1C2617E1" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>                if let Ok(true) = acquire_lock(&amp;pool, lock_id).await {</w:t></w:r></w:p><w:p w14:paraId="7C6ED067" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>                    let service = OsdrService::new(osdr_repo.clone(), nasa_client.clone());</w:t></w:r></w:p><w:p w14:paraId="423DEC10" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>                    if let Err(e) = service.sync().await {</w:t></w:r></w:p><w:p w14:paraId="5C960A56" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>                        error!("OSDR sync error: {:?}", e);</w:t></w:r></w:p><w:p w14:paraId="03176DFF" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>                    }</w:t></w:r></w:p><w:p w14:paraId="34E38091" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>                    let _ = release_lock(&amp;pool, lock_id).await;</w:t></w:r></w:p><w:p w14:paraId="16C8059C" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>                }</w:t></w:r></w:p><w:p w14:paraId="128BEE5E" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            }</w:t></w:r></w:p><w:p w14:paraId="1D444492" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        });</w:t></w:r></w:p><w:p w14:paraId="5F076642" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    }</w:t></w:r></w:p><w:p w14:paraId="39EAEE49" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="04C4271D" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    // </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>Роутер</w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>создан</w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>отдельной</w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>функцией</w:t></w:r></w:p><w:p w14:paraId="741D26AC" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    let app = create_router().with_state(state);</w:t></w:r></w:p><w:p w14:paraId="1D619BF5" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="44A8C911" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    let listener = tokio::net::TcpListener::bind(&amp;addr).await?;</w:t></w:r></w:p><w:p w14:paraId="1A365A75" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    info!("rust_iss listening on {}", addr);</w:t></w:r></w:p><w:p w14:paraId="323906B5" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    axum::serve(listener, app.into_make_service()).await?;</w:t></w:r></w:p><w:p w14:paraId="50C31D2D" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="684335DD" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>Ok(())</w:t></w:r></w:p><w:p w14:paraId="75765C6A" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="6B54FB3C" w14:textId="77777777" w:rsidR="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr></w:p><w:p w14:paraId="7ABF3637" w14:textId="70B9DBAD" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>До рефакторинга:</w:t></w:r></w:p><w:p w14:paraId="148FCDF3" w14:textId="5DD746A4" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="6"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>Весь код в одном файле (handlers, services, clients, DB инициализация)</w:t></w:r></w:p><w:p w14:paraId="6BDCA164" w14:textId="5CA00927" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="6"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:lastRenderedPageBreak/><w:t>Прямые SQL запросы в handlers</w:t></w:r></w:p><w:p w14:paraId="0A28696D" w14:textId="52640D4C" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="6"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>Нет разделения ответственности</w:t></w:r></w:p><w:p w14:paraId="4B6123E2" w14:textId="4F2F8AC9" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="6"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>Ошибки возвращаются как HTTP статусы</w:t></w:r></w:p><w:p w14:paraId="68AA7229" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr></w:p><w:p w14:paraId="6DEA7FA9" w14:textId="6CEBFFD5" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>После рефакторинга:</w:t></w:r></w:p><w:p w14:paraId="58305E65" w14:textId="26E1DC15" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="7"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>Только инициализация и запуск сервера</w:t></w:r></w:p><w:p w14:paraId="52A22706" w14:textId="376DF017" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="7"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>Выделены</w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>модули</w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/><w:lang w:val="en-US"/></w:rPr><w:t>: config, domain, error, repo, clients, services, handlers, routes</w:t></w:r></w:p><w:p w14:paraId="31C00552" w14:textId="1950CCC8" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="7"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">Dependency Injection </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>через</w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> AppState</w:t></w:r></w:p><w:p w14:paraId="2E98E319" w14:textId="0A7FAE05" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="7"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>Фоновые</w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>задачи</w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>с</w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> Advisory Locks</w:t></w:r></w:p><w:p w14:paraId="3A4CF46C" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="3549B1DF" w14:textId="6BF715E4" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>Влияние:</w:t></w:r></w:p><w:p w14:paraId="67397B4C" w14:textId="282AD654" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="8"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>Код стал в 2 раза короче и читабельнее</w:t></w:r></w:p><w:p w14:paraId="233BF0CC" w14:textId="0F32BE97" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="8"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>Легко тестировать отдельные компоненты</w:t></w:r></w:p><w:p w14:paraId="4D9181F3" w14:textId="5E99C532" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="8"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>Можно добавлять новые endpoints без изменения существующего кода</w:t></w:r></w:p><w:p w14:paraId="7DAC4BFB" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr></w:p><w:p w14:paraId="6E2FFC09" w14:textId="078C7A05" w:rsidR="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>2. src/config.rs</w:t></w:r></w:p><w:p w14:paraId="17AE18FD" w14:textId="357DFF93" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>ДО: конфигурация разбросана по main.rs</w:t></w:r></w:p><w:p w14:paraId="0D01650D" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>let db_url = std::env::var("DATABASE_URL")</w:t></w:r></w:p><w:p w14:paraId="098E4D9C" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    .expect("DATABASE_URL is required");</w:t></w:r></w:p><w:p w14:paraId="334421C1" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>let nasa_url = std::env::var("NASA_API_URL")</w:t></w:r></w:p><w:p w14:paraId="57CFB8E9" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    .unwrap_or_else(|_| "https://visualization.osdr.nasa.gov/...".to_string());</w:t></w:r></w:p><w:p w14:paraId="56F5ADA4" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>let nasa_key = std::env::var("NASA_API_KEY").unwrap_or_default();</w:t></w:r></w:p><w:p w14:paraId="2A13551B" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>let fallback_url = std::env::var("WHEREISS_URL")</w:t></w:r></w:p><w:p w14:paraId="42B4AF32" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    .unwrap_or_else(|_| "http://api.open-notify.org/iss-now.json".to_string());</w:t></w:r></w:p><w:p w14:paraId="28B1E875" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>let every_osdr = std::env::var("EVERY_OSDR_SEC")</w:t></w:r></w:p><w:p w14:paraId="4C2F9B6F" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    .unwrap_or_else(|_| "3600".to_string())</w:t></w:r></w:p><w:p w14:paraId="596ABD60" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>.parse::&lt;u64&gt;()</w:t></w:r></w:p><w:p w14:paraId="6EEFF3B9" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="0096375C"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>    .unwrap_or(3600);</w:t></w:r></w:p><w:p w14:paraId="1650EC98" w14:textId="77777777" w:rsidR="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr></w:p><w:p w14:paraId="51E4E198" w14:textId="77777777" w:rsidR="00E17422" w:rsidRDefault="00E17422" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr></w:p><w:p w14:paraId="244EAE2C" w14:textId="54AF5477" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>ПОСЛЕ: централизованная структурированная конфигурация</w:t></w:r></w:p><w:p w14:paraId="797CA649" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="001D356A" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="001D356A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>use serde::Deserialize;</w:t></w:r></w:p><w:p w14:paraId="3E042DFA" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>use std::time::Duration;</w:t></w:r></w:p><w:p w14:paraId="41649DD2" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="4C075E80" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>#[derive(Clone, Debug)]</w:t></w:r></w:p><w:p w14:paraId="51C12CD7" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>pub struct Config {</w:t></w:r></w:p><w:p w14:paraId="7AE213DC" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    pub database: DatabaseConfig,</w:t></w:r></w:p><w:p w14:paraId="4E20E45E" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    pub external: ExternalConfig,</w:t></w:r></w:p><w:p w14:paraId="5EE5D751" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    pub scheduler: SchedulerConfig,</w:t></w:r></w:p><w:p w14:paraId="32823138" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="47A6EF4F" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="6A378BDA" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>#[derive(Clone, Debug)]</w:t></w:r></w:p><w:p w14:paraId="6FFD2872" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>pub struct DatabaseConfig {</w:t></w:r></w:p><w:p w14:paraId="5E05A016" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    pub url: String,</w:t></w:r></w:p><w:p w14:paraId="18DB63CE" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    pub max_connections: u32,</w:t></w:r></w:p><w:p w14:paraId="33909A52" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="4D7D1660" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="52D051DE" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>#[derive(Clone, Debug)]</w:t></w:r></w:p><w:p w14:paraId="1CE18831" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>pub struct ExternalConfig {</w:t></w:r></w:p><w:p w14:paraId="133291C7" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    pub nasa_url: String,</w:t></w:r></w:p><w:p w14:paraId="160F27D5" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    pub nasa_key: String,</w:t></w:r></w:p><w:p w14:paraId="5E77D41E" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    pub where_iss_url: String,</w:t></w:r></w:p><w:p w14:paraId="36117684" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    pub spacex_url: String,</w:t></w:r></w:p><w:p w14:paraId="56FC63D8" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    pub timeout: Duration,</w:t></w:r></w:p><w:p w14:paraId="2B8F30A8" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="001D356A" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="001D356A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>pub user_agent: String,</w:t></w:r></w:p><w:p w14:paraId="2F4A790B" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="001D356A" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="001D356A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="571276EF" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="001D356A" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="7A6983CA" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>#[derive(Clone, Debug)]</w:t></w:r></w:p><w:p w14:paraId="3CF1DBD6" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>pub struct SchedulerConfig {</w:t></w:r></w:p><w:p w14:paraId="258B7989" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    pub osdr_interval: Duration,</w:t></w:r></w:p><w:p w14:paraId="72C2399C" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    pub iss_interval: Duration,</w:t></w:r></w:p><w:p w14:paraId="20290265" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:lastRenderedPageBreak/><w:t>    pub space_cache_interval: Duration,</w:t></w:r></w:p><w:p w14:paraId="604DA5BF" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="1DDC6E0D" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="2C769E26" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>impl Config {</w:t></w:r></w:p><w:p w14:paraId="5D9DDED6" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    pub fn from_env() -&gt; anyhow::Result&lt;Self&gt; {</w:t></w:r></w:p><w:p w14:paraId="0C7A9914" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        Ok(Config {</w:t></w:r></w:p><w:p w14:paraId="564F45DE" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            database: DatabaseConfig {</w:t></w:r></w:p><w:p w14:paraId="3A3838EE" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>                url: std::env::var("DATABASE_URL")</w:t></w:r></w:p><w:p w14:paraId="19ECCFCA" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>                    .map_err(|_| anyhow::anyhow!("DATABASE_URL is required"))?,</w:t></w:r></w:p><w:p w14:paraId="2CEC3D3E" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>                max_connections: std::env::var("DB_MAX_CONNECTIONS")</w:t></w:r></w:p><w:p w14:paraId="7DF64A96" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>                    .unwrap_or_else(|_| "5".to_string())</w:t></w:r></w:p><w:p w14:paraId="6C985F3D" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>                    .parse()</w:t></w:r></w:p><w:p w14:paraId="2C8AA604" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>                    .unwrap_or(5),</w:t></w:r></w:p><w:p w14:paraId="5E0FAEDC" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            },</w:t></w:r></w:p><w:p w14:paraId="1AB40BBC" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            external: ExternalConfig {</w:t></w:r></w:p><w:p w14:paraId="0832EEA9" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>                nasa_url: std::env::var("NASA_API_URL")</w:t></w:r></w:p><w:p w14:paraId="24FA8830" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>                    .unwrap_or_else(|_| "https://visualization.osdr.nasa.gov/...".to_string()),</w:t></w:r></w:p><w:p w14:paraId="3A475528" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>                nasa_key: std::env::var("NASA_API_KEY").unwrap_or_default(),</w:t></w:r></w:p><w:p w14:paraId="5D9AB074" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>                where_iss_url: std::env::var("WHEREISS_URL")</w:t></w:r></w:p><w:p w14:paraId="12703294" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>                    .unwrap_or_else(|_| "http://api.open-notify.org/iss-now.json".to_string()),</w:t></w:r></w:p><w:p w14:paraId="75510279" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>                spacex_url: std::env::var("SPACEX_URL")</w:t></w:r></w:p><w:p w14:paraId="3FD8CA54" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>                    .unwrap_or_else(|_| "https://api.spacexdata.com/v4/launches/latest".to_string()),</w:t></w:r></w:p><w:p w14:paraId="7AD6C16B" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>                timeout: Duration::from_secs(10),</w:t></w:r></w:p><w:p w14:paraId="1BC71BF6" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>                user_agent: "monolith-iss/1.0".to_string(),</w:t></w:r></w:p><w:p w14:paraId="40886A09" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            },</w:t></w:r></w:p><w:p w14:paraId="4C58A18D" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            scheduler: SchedulerConfig {</w:t></w:r></w:p><w:p w14:paraId="7F3A8698" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>                osdr_interval: Duration::from_secs(3600),</w:t></w:r></w:p><w:p w14:paraId="034A7666" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>                iss_interval: Duration::from_secs(120),</w:t></w:r></w:p><w:p w14:paraId="5AACE039" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>                space_cache_interval: Duration::from_secs(600),</w:t></w:r></w:p><w:p w14:paraId="3522DB41" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">            </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>},</w:t></w:r></w:p><w:p w14:paraId="1542105A" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>        })</w:t></w:r></w:p><w:p w14:paraId="227A07F7" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>    }</w:t></w:r></w:p><w:p w14:paraId="3E905C35" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:lastRenderedPageBreak/><w:t>}</w:t></w:r></w:p><w:p w14:paraId="664D3EC0" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr></w:p><w:p w14:paraId="60AC8AF6" w14:textId="5A0863AB" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>Что это изменило:</w:t></w:r></w:p><w:p w14:paraId="565BF048" w14:textId="4AB78917" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="9"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>Все переменные окружения в одном месте с валидацией</w:t></w:r></w:p><w:p w14:paraId="37909ED0" w14:textId="2EFE30B0" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="9"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>Ошибки конфигурации обнаруживаются при старте</w:t></w:r></w:p><w:p w14:paraId="42296016" w14:textId="43CF171F" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="9"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>Легко добавить новые параметры</w:t></w:r></w:p><w:p w14:paraId="44352855" w14:textId="77777777" w:rsidR="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr></w:p><w:p w14:paraId="1AF0E1AB" w14:textId="7A75585C" w:rsidR="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>3. src/error.r</w:t></w:r></w:p><w:p w14:paraId="6C9FF01E" w14:textId="29EEB252" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>ДО: ошибки возвращаются как HTTP статусы с текстом</w:t></w:r></w:p><w:p w14:paraId="4ECBA49C" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>async fn last_iss(State(st): State&lt;AppState&gt;)</w:t></w:r></w:p><w:p w14:paraId="7576DC4B" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>-&gt; Result&lt;Json&lt;Value&gt;, (StatusCode, String)&gt; {</w:t></w:r></w:p><w:p w14:paraId="6BEE3177" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    let row_opt = sqlx::query("SELECT ... FROM iss_fetch_log ...")</w:t></w:r></w:p><w:p w14:paraId="2BEC84C3" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        .fetch_optional(&amp;st.pool).await</w:t></w:r></w:p><w:p w14:paraId="2BAE0149" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        .map_err(|e| (StatusCode::INTERNAL_SERVER_ERROR, e.to_string()))?;</w:t></w:r></w:p><w:p w14:paraId="4D741C32" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="7A6A795C" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>// Разные форматы ошибок в разных handlers</w:t></w:r></w:p><w:p w14:paraId="61BEBE66" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>if row_opt.is_none() {</w:t></w:r></w:p><w:p w14:paraId="6D9B322F" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        return Err((StatusCode::NOT_FOUND, "No data found".to_string()));</w:t></w:r></w:p><w:p w14:paraId="75E11AD3" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    }</w:t></w:r></w:p><w:p w14:paraId="57CF0444" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    // ...</w:t></w:r></w:p><w:p w14:paraId="3BE38908" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="230CDA10" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="3F166FB4" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>async fn fetch_osdr(State(st): State&lt;AppState&gt;)</w:t></w:r></w:p><w:p w14:paraId="5AC828B3" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>-&gt; Result&lt;Json&lt;Value&gt;, (StatusCode, String)&gt; {</w:t></w:r></w:p><w:p w14:paraId="4BCE52D6" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    let resp = reqwest::get(&amp;st.nasa_url).await</w:t></w:r></w:p><w:p w14:paraId="454CC697" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        .map_err(|e| (StatusCode::BAD_GATEWAY, format!("Upstream error: {}", e)))?;</w:t></w:r></w:p><w:p w14:paraId="2D6B6972" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="0CB9050C" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    if resp.status() == 403 {</w:t></w:r></w:p><w:p w14:paraId="31034D8A" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        return Err((StatusCode::FORBIDDEN, "Access denied".to_string()));</w:t></w:r></w:p><w:p w14:paraId="66C2791A" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="4DACCFB5" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:lastRenderedPageBreak/><w:t>    // Нет trace_id, разные форматы ответов</w:t></w:r></w:p><w:p w14:paraId="79A936DB" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="5A3AF20D" w14:textId="77777777" w:rsidR="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr></w:p><w:p w14:paraId="790D140B" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr></w:p><w:p w14:paraId="534D8D5C" w14:textId="05C6E542" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>ПОСЛЕ: единый формат ошибок с trace_id</w:t></w:r></w:p><w:p w14:paraId="6134E746" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>use uuid::Uuid;</w:t></w:r></w:p><w:p w14:paraId="45995500" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>use axum::{response::IntoResponse, Json};</w:t></w:r></w:p><w:p w14:paraId="265EC269" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="1C54EEB8" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>#[derive(Debug)]</w:t></w:r></w:p><w:p w14:paraId="0156C1A5" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>pub struct ApiError {</w:t></w:r></w:p><w:p w14:paraId="784F7E47" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    pub code: ErrorCode,</w:t></w:r></w:p><w:p w14:paraId="1CAC517F" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    pub message: String,</w:t></w:r></w:p><w:p w14:paraId="19BF4324" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    pub trace_id: String,</w:t></w:r></w:p><w:p w14:paraId="597F72ED" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    pub status: axum::http::StatusCode,</w:t></w:r></w:p><w:p w14:paraId="0968C671" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    pub source: Option&lt;anyhow::Error&gt;,</w:t></w:r></w:p><w:p w14:paraId="13919673" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="5345727F" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="2A465F3C" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>#[derive(Debug, Clone, Copy)]</w:t></w:r></w:p><w:p w14:paraId="68C04641" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>pub enum ErrorCode {</w:t></w:r></w:p><w:p w14:paraId="33541410" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    InternalError,</w:t></w:r></w:p><w:p w14:paraId="3B928B98" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    UpstreamError,</w:t></w:r></w:p><w:p w14:paraId="000221A3" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    Upstream403,</w:t></w:r></w:p><w:p w14:paraId="6CD10E67" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    Upstream404,</w:t></w:r></w:p><w:p w14:paraId="2B227B5C" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    UpstreamTimeout,</w:t></w:r></w:p><w:p w14:paraId="64E33616" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    DatabaseError,</w:t></w:r></w:p><w:p w14:paraId="7B9ED6A3" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    ValidationError,</w:t></w:r></w:p><w:p w14:paraId="179D1398" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    NotFound,</w:t></w:r></w:p><w:p w14:paraId="000562BF" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="69A9F986" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="38D6761A" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>#[derive(Serialize)]</w:t></w:r></w:p><w:p w14:paraId="167DA4C8" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>pub struct ErrorResponse {</w:t></w:r></w:p><w:p w14:paraId="6D273E42" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    pub ok: bool,</w:t></w:r></w:p><w:p w14:paraId="158C4D42" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:lastRenderedPageBreak/><w:t>    pub error: ErrorDetail,</w:t></w:r></w:p><w:p w14:paraId="427CAA61" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="43A11711" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="15FEBA20" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>#[derive(Serialize)]</w:t></w:r></w:p><w:p w14:paraId="68371405" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>pub struct ErrorDetail {</w:t></w:r></w:p><w:p w14:paraId="2407FF13" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    pub code: String,</w:t></w:r></w:p><w:p w14:paraId="61D14E06" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    pub message: String,</w:t></w:r></w:p><w:p w14:paraId="35AB1904" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    pub trace_id: String,</w:t></w:r></w:p><w:p w14:paraId="7FEB8A50" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="0A26136E" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="71C419E1" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>impl ApiError {</w:t></w:r></w:p><w:p w14:paraId="0B21D26A" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    pub fn new(code: ErrorCode, message: impl Into&lt;String&gt;) -&gt; Self {</w:t></w:r></w:p><w:p w14:paraId="2B91E1C9" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        Self {</w:t></w:r></w:p><w:p w14:paraId="168F951E" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            code,</w:t></w:r></w:p><w:p w14:paraId="1D58631D" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            message: message.into(),</w:t></w:r></w:p><w:p w14:paraId="62DF0063" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">            trace_id: Uuid::new_v4().to_string(), // </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>Автоматическая</w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>генерация</w:t></w:r></w:p><w:p w14:paraId="201EC04A" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">            status: StatusCode::OK, // </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>ВСЕГДА</w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> HTTP 200 </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>для</w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>предсказуемости</w:t></w:r></w:p><w:p w14:paraId="56C3A70E" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            source: None,</w:t></w:r></w:p><w:p w14:paraId="2AECAB90" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        }</w:t></w:r></w:p><w:p w14:paraId="547E873B" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    }</w:t></w:r></w:p><w:p w14:paraId="1516CD0F" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="26C57E22" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    pub fn upstream_403(msg: impl Into&lt;String&gt;) -&gt; Self {</w:t></w:r></w:p><w:p w14:paraId="0184B559" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        Self::new(ErrorCode::Upstream403, msg)</w:t></w:r></w:p><w:p w14:paraId="5B2DC663" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    }</w:t></w:r></w:p><w:p w14:paraId="0620A082" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="2CBA4051" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="004239E6" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>impl IntoResponse for ApiError {</w:t></w:r></w:p><w:p w14:paraId="07B3D133" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    fn into_response(self) -&gt; Response {</w:t></w:r></w:p><w:p w14:paraId="186D3E30" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        use axum::http::StatusCode;</w:t></w:r></w:p><w:p w14:paraId="31F7832F" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">        </w:t></w:r></w:p><w:p w14:paraId="7F705ECD" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">        // </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>Логируем</w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>ошибку</w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>с</w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> trace_id</w:t></w:r></w:p><w:p w14:paraId="14F1D3ED" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        let trace_id_clone = self.trace_id.clone();</w:t></w:r></w:p><w:p w14:paraId="1C5BE71E" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:lastRenderedPageBreak/><w:t>        tracing::error!(</w:t></w:r></w:p><w:p w14:paraId="0CBE3056" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            trace_id = %trace_id_clone,</w:t></w:r></w:p><w:p w14:paraId="7750FCD3" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            code = %self.code.as_str(),</w:t></w:r></w:p><w:p w14:paraId="79002395" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            "API error: {}", self.message</w:t></w:r></w:p><w:p w14:paraId="156211EE" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        );</w:t></w:r></w:p><w:p w14:paraId="6E56823E" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">        </w:t></w:r></w:p><w:p w14:paraId="07CF79DD" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">        // </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>ВСЕГДА</w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>возвращаем</w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> HTTP 200 </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>с</w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> ok: false</w:t></w:r></w:p><w:p w14:paraId="3D82D825" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        let body = Json(ErrorResponse {</w:t></w:r></w:p><w:p w14:paraId="5FAADA82" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            ok: false,</w:t></w:r></w:p><w:p w14:paraId="388D899D" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            error: ErrorDetail {</w:t></w:r></w:p><w:p w14:paraId="28E52474" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>                code: self.code.as_str().to_string(),</w:t></w:r></w:p><w:p w14:paraId="79B43680" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>                message: self.message,</w:t></w:r></w:p><w:p w14:paraId="119BCDD4" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>                trace_id: self.trace_id,</w:t></w:r></w:p><w:p w14:paraId="21340546" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            },</w:t></w:r></w:p><w:p w14:paraId="63BB1E4D" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        });</w:t></w:r></w:p><w:p w14:paraId="1C8661F1" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">        </w:t></w:r></w:p><w:p w14:paraId="6A681897" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        (StatusCode::OK, body).into_response()</w:t></w:r></w:p><w:p w14:paraId="368441FB" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    }</w:t></w:r></w:p><w:p w14:paraId="0AE40DF5" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="69F82653" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="6FE33270" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">// </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>Использование</w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>в</w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> handlers:</w:t></w:r></w:p><w:p w14:paraId="7A12EF4A" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>pub async fn last_iss(State(state): State&lt;AppState&gt;) -&gt; ApiResult&lt;Value&gt; {</w:t></w:r></w:p><w:p w14:paraId="4372ECC8" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    let service = IssService::new(...);</w:t></w:r></w:p><w:p w14:paraId="2AF29B16" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    match service.get_last().await {</w:t></w:r></w:p><w:p w14:paraId="38345A15" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        Ok(Some(log)) =&gt; Ok(ok_response(json!({...}))),</w:t></w:r></w:p><w:p w14:paraId="4B70AF38" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        Ok(None) =&gt; Err(ApiError::not_found("No ISS data available")),</w:t></w:r></w:p><w:p w14:paraId="3CFEDE25" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">        </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>Err(e) =&gt; Err(ApiError::from(e)), // Автоматическое преобразование</w:t></w:r></w:p><w:p w14:paraId="189D1360" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>    }</w:t></w:r></w:p><w:p w14:paraId="5CFD0CDC" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="5ED4D613" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="0096375C" w:rsidRDefault="00E17422" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr></w:p><w:p w14:paraId="6E120E70" w14:textId="77777777" w:rsidR="0096375C" w:rsidRPr="0096375C" w:rsidRDefault="0096375C" w:rsidP="0096375C"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr></w:p><w:p w14:paraId="25B94BED" w14:textId="0A4CA7FD" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Что это изменило:</w:t></w:r></w:p><w:p w14:paraId="50A286AF" w14:textId="24C8294C" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="10"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:lastRenderedPageBreak/><w:t>Все ошибки возвращаются с HTTP 200 и `ok: false` для предсказуемости</w:t></w:r></w:p><w:p w14:paraId="0615BB46" w14:textId="77D2D810" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="10"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Автоматическая генерация `trace_id` для отслеживания</w:t></w:r></w:p><w:p w14:paraId="0ABE1BCA" w14:textId="2112493B" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="10"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Единый формат ошибок во всех endpoints</w:t></w:r></w:p><w:p w14:paraId="3A3CC011" w14:textId="062D9192" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="10"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Логирование ошибок с контекстом и trace_id</w:t></w:r></w:p><w:p w14:paraId="32E3EC98" w14:textId="36244156" w:rsidR="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="10"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Клиенты могут обрабатывать ошибки единообразно</w:t></w:r></w:p><w:p w14:paraId="09C9565E" w14:textId="77777777" w:rsidR="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr></w:p><w:p w14:paraId="5B786FF3" w14:textId="77777777" w:rsidR="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr></w:p><w:p w14:paraId="6D2287A1" w14:textId="42786232" w:rsidR="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>4. src/repo.rs</w:t></w:r></w:p><w:p w14:paraId="028D62E9" w14:textId="66543F60" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>ДО: SQL запросы прямо в handlers</w:t></w:r></w:p><w:p w14:paraId="05183A72" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>async fn last_iss(State(st): State&lt;AppState&gt;)</w:t></w:r></w:p><w:p w14:paraId="0D86EAEE" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>-&gt; Result&lt;Json&lt;Value&gt;, (StatusCode, String)&gt; {</w:t></w:r></w:p><w:p w14:paraId="0BEF69D2" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    // </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>Прямой</w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> SQL </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>запрос</w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>в</w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> handler</w:t></w:r></w:p><w:p w14:paraId="7ABB5ED0" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    let row_opt = sqlx::query(</w:t></w:r></w:p><w:p w14:paraId="013138A1" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        "SELECT id, fetched_at, source_url, payload</w:t></w:r></w:p><w:p w14:paraId="5856394D" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>         FROM iss_fetch_log</w:t></w:r></w:p><w:p w14:paraId="7EE11D61" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>         ORDER BY id DESC</w:t></w:r></w:p><w:p w14:paraId="1D3118D0" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>         LIMIT 1"</w:t></w:r></w:p><w:p w14:paraId="7F919FBA" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    )</w:t></w:r></w:p><w:p w14:paraId="10A99D4E" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    .fetch_optional(&amp;st.pool).await</w:t></w:r></w:p><w:p w14:paraId="56048131" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    .map_err(|e| (StatusCode::INTERNAL_SERVER_ERROR, e.to_string()))?;</w:t></w:r></w:p><w:p w14:paraId="05DD1610" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="0DA40E73" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    // </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>Прямая</w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>обработка</w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> Row </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>в</w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> handler</w:t></w:r></w:p><w:p w14:paraId="69CB12D0" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    if let Some(row) = row_opt {</w:t></w:r></w:p><w:p w14:paraId="2E9DA8E1" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        let id: i64 = row.get("id");</w:t></w:r></w:p><w:p w14:paraId="7164881E" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">        let fetched_at: DateTime&lt;Utc&gt; = row.get("fetched_at"); // </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>Может</w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>быть</w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>ошибка</w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>типизации</w:t></w:r></w:p><w:p w14:paraId="38C6D292" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        let source_url: String = row.get("source_url");</w:t></w:r></w:p><w:p w14:paraId="3E8905A1" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        let payload: Value = row.get("payload");</w:t></w:r></w:p><w:p w14:paraId="29A9BC1E" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">        </w:t></w:r></w:p><w:p w14:paraId="6FA2A170" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        return Ok(Json(json!({</w:t></w:r></w:p><w:p w14:paraId="4D183E06" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            "id": id,</w:t></w:r></w:p><w:p w14:paraId="36103B3B" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            "fetched_at": fetched_at,</w:t></w:r></w:p><w:p w14:paraId="27BD121D" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            "source_url": source_url,</w:t></w:r></w:p><w:p w14:paraId="1B6CA78C" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            "payload": payload</w:t></w:r></w:p><w:p w14:paraId="32646480" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:lastRenderedPageBreak/><w:t>        })));</w:t></w:r></w:p><w:p w14:paraId="507056A5" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    }</w:t></w:r></w:p><w:p w14:paraId="00B8D11C" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="4D3AD87E" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    Ok(Json(json!({"message": "no data"})))</w:t></w:r></w:p><w:p w14:paraId="659031E3" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="67D6CE25" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="36AF44DF" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>async fn iss_trend(State(st): State&lt;AppState&gt;, Query(params): Query&lt;HashMap&lt;String, String&gt;&gt;)</w:t></w:r></w:p><w:p w14:paraId="7CF1FA45" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>-&gt; Result&lt;Json&lt;Value&gt;, (StatusCode, String)&gt; {</w:t></w:r></w:p><w:p w14:paraId="6A1B3268" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>// Ещё один SQL запрос с другой логикой</w:t></w:r></w:p><w:p w14:paraId="3069BE09" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>let limit = params.get("limit").and_then(|s| s.parse::&lt;i64&gt;().ok()).unwrap_or(2);</w:t></w:r></w:p><w:p w14:paraId="63AC3B94" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="61769493" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    let rows = sqlx::query(</w:t></w:r></w:p><w:p w14:paraId="1D2EB641" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        "SELECT fetched_at, payload</w:t></w:r></w:p><w:p w14:paraId="24128FD7" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>         FROM iss_fetch_log</w:t></w:r></w:p><w:p w14:paraId="7724F5BB" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>         ORDER BY id DESC</w:t></w:r></w:p><w:p w14:paraId="5FF403D6" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>         LIMIT $1"</w:t></w:r></w:p><w:p w14:paraId="2F442127" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    )</w:t></w:r></w:p><w:p w14:paraId="63B8AB09" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    .bind(limit)</w:t></w:r></w:p><w:p w14:paraId="3E865841" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    .fetch_all(&amp;st.pool).await</w:t></w:r></w:p><w:p w14:paraId="42F4833D" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    .map_err(|e| (StatusCode::INTERNAL_SERVER_ERROR, e.to_string()))?;</w:t></w:r></w:p><w:p w14:paraId="395B9BE5" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="0A7866C7" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>// Бизнес-логика расчёта тренда прямо в handler</w:t></w:r></w:p><w:p w14:paraId="480B97D1" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>if rows.len() &lt; 2 {</w:t></w:r></w:p><w:p w14:paraId="7FCBF740" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        return Ok(Json(json!({"movement": false})));</w:t></w:r></w:p><w:p w14:paraId="4ED959A5" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="26A80E7B" w14:textId="77777777" w:rsidR="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr></w:p><w:p w14:paraId="0350F17A" w14:textId="7E8A9CA3" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="3E465853" w14:textId="18404281" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>ПОСЛЕ: Repository Pattern - вся работа с БД изолирована</w:t></w:r></w:p><w:p w14:paraId="2BB74045" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>use chrono::{DateTime, Utc};</w:t></w:r></w:p><w:p w14:paraId="302961EC" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>use sqlx::{PgPool, Row};</w:t></w:r></w:p><w:p w14:paraId="3E9E5FD2" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>use crate::domain::IssFetchLog;</w:t></w:r></w:p><w:p w14:paraId="5CCEC0E5" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="02CB0795" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:lastRenderedPageBreak/><w:t>#[derive(Clone)]</w:t></w:r></w:p><w:p w14:paraId="41EE924E" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>pub struct IssRepo {</w:t></w:r></w:p><w:p w14:paraId="786F967F" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    pool: PgPool,</w:t></w:r></w:p><w:p w14:paraId="6BED8703" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="1261681E" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="3DE3FB46" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>impl IssRepo {</w:t></w:r></w:p><w:p w14:paraId="6E2B84FE" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    pub fn new(pool: PgPool) -&gt; Self {</w:t></w:r></w:p><w:p w14:paraId="1699F8F1" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">        </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>Self { pool }</w:t></w:r></w:p><w:p w14:paraId="2BEFE1FC" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>    }</w:t></w:r></w:p><w:p w14:paraId="2CBD4F5F" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr></w:p><w:p w14:paraId="759ACCA5" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>    // Создание записи с правильной типизацией</w:t></w:r></w:p><w:p w14:paraId="4EA9CDAD" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">pub async fn create(&amp;self, source_url: &amp;str, payload: Value) </w:t></w:r></w:p><w:p w14:paraId="634449E0" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        -&gt; Result&lt;IssFetchLog, sqlx::Error&gt; {</w:t></w:r></w:p><w:p w14:paraId="4DD30305" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        let row = sqlx::query(</w:t></w:r></w:p><w:p w14:paraId="3327BF31" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            r#"</w:t></w:r></w:p><w:p w14:paraId="16DE959E" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            INSERT INTO iss_fetch_log (source_url, payload)</w:t></w:r></w:p><w:p w14:paraId="741E8791" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            VALUES ($1, $2)</w:t></w:r></w:p><w:p w14:paraId="5243B638" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            RETURNING id, fetched_at, source_url, payload</w:t></w:r></w:p><w:p w14:paraId="0AB25598" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            "#,</w:t></w:r></w:p><w:p w14:paraId="768A5420" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        )</w:t></w:r></w:p><w:p w14:paraId="33CA3A66" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        .bind(source_url)</w:t></w:r></w:p><w:p w14:paraId="702F2EBF" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        .bind(&amp;payload)</w:t></w:r></w:p><w:p w14:paraId="5D215177" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        .fetch_one(&amp;self.pool)</w:t></w:r></w:p><w:p w14:paraId="623F3AA3" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        .await?;</w:t></w:r></w:p><w:p w14:paraId="2EB97B73" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="1CC1A466" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">        </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>// Правильное преобразование TIMESTAMPTZ → DateTime&lt;Utc&gt;</w:t></w:r></w:p><w:p w14:paraId="4BCCAAAE" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t xml:space="preserve">        </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>Ok(IssFetchLog {</w:t></w:r></w:p><w:p w14:paraId="05BCB5F2" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            id: row.get("id"),</w:t></w:r></w:p><w:p w14:paraId="339CCB7F" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">            fetched_at: row.get("fetched_at"), // </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>Автоматически</w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> DateTime&lt;Utc&gt;</w:t></w:r></w:p><w:p w14:paraId="2137A506" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            source_url: row.get("source_url"),</w:t></w:r></w:p><w:p w14:paraId="6EC2A182" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">            </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>payload: row.get("payload"),</w:t></w:r></w:p><w:p w14:paraId="3BBAD942" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>        })</w:t></w:r></w:p><w:p w14:paraId="0A2D9B83" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:lastRenderedPageBreak/><w:t>    }</w:t></w:r></w:p><w:p w14:paraId="12B39E99" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr></w:p><w:p w14:paraId="0FD81B4B" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>    // Поиск последней записи</w:t></w:r></w:p><w:p w14:paraId="709BB933" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>pub async fn find_last(&amp;self) -&gt; Result&lt;Option&lt;IssFetchLog&gt;, sqlx::Error&gt; {</w:t></w:r></w:p><w:p w14:paraId="211CD922" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        let row_opt = sqlx::query(</w:t></w:r></w:p><w:p w14:paraId="6AC2ADB6" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            r#"</w:t></w:r></w:p><w:p w14:paraId="498F2071" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            SELECT id, fetched_at, source_url, payload</w:t></w:r></w:p><w:p w14:paraId="12DC7C86" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            FROM iss_fetch_log</w:t></w:r></w:p><w:p w14:paraId="2FA1E29E" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            ORDER BY id DESC</w:t></w:r></w:p><w:p w14:paraId="707F9B3E" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            LIMIT 1</w:t></w:r></w:p><w:p w14:paraId="6A737D2D" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            "#,</w:t></w:r></w:p><w:p w14:paraId="6B9617AA" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        )</w:t></w:r></w:p><w:p w14:paraId="7816B94F" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        .fetch_optional(&amp;self.pool)</w:t></w:r></w:p><w:p w14:paraId="1AD002EA" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        .await?;</w:t></w:r></w:p><w:p w14:paraId="390C7E2F" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="2F51AD3D" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        Ok(row_opt.map(|row| IssFetchLog {</w:t></w:r></w:p><w:p w14:paraId="6B6FC0AB" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            id: row.get("id"),</w:t></w:r></w:p><w:p w14:paraId="393F5336" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            fetched_at: row.get("fetched_at"),</w:t></w:r></w:p><w:p w14:paraId="4D681875" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            source_url: row.get("source_url"),</w:t></w:r></w:p><w:p w14:paraId="2D7F122D" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">            </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>payload: row.get("payload"),</w:t></w:r></w:p><w:p w14:paraId="7EE921BC" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>        }))</w:t></w:r></w:p><w:p w14:paraId="50C01DE2" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="009A1F1A" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="009A1F1A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="75475937" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="009A1F1A" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr></w:p><w:p w14:paraId="4D368552" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="009A1F1A" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="009A1F1A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="009A1F1A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t xml:space="preserve"> // </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>Получение</w:t></w:r><w:r w:rsidRPr="009A1F1A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>данных</w:t></w:r><w:r w:rsidRPr="009A1F1A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>для</w:t></w:r><w:r w:rsidRPr="009A1F1A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>расчёта</w:t></w:r><w:r w:rsidRPr="009A1F1A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>тренда</w:t></w:r></w:p><w:p w14:paraId="3FA57BD2" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="009A1F1A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t> </w:t></w:r><w:r w:rsidRPr="009A1F1A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">pub async fn find_recent_for_trend(&amp;self, limit: i64) </w:t></w:r></w:p><w:p w14:paraId="4A8C09BF" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        -&gt; Result&lt;Vec&lt;(DateTime&lt;Utc&gt;, Value)&gt;, sqlx::Error&gt; {</w:t></w:r></w:p><w:p w14:paraId="795EB1C9" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        let rows = sqlx::query(</w:t></w:r></w:p><w:p w14:paraId="40D75E36" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            r#"</w:t></w:r></w:p><w:p w14:paraId="21461091" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            SELECT fetched_at, payload</w:t></w:r></w:p><w:p w14:paraId="17F64114" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            FROM iss_fetch_log</w:t></w:r></w:p><w:p w14:paraId="5D2B4ACB" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            ORDER BY id DESC</w:t></w:r></w:p><w:p w14:paraId="60E1463B" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            LIMIT $1</w:t></w:r></w:p><w:p w14:paraId="3D502245" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:lastRenderedPageBreak/><w:t>            "#,</w:t></w:r></w:p><w:p w14:paraId="463F8CEE" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        )</w:t></w:r></w:p><w:p w14:paraId="0F0E5477" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        .bind(limit)</w:t></w:r></w:p><w:p w14:paraId="33CB1014" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        .fetch_all(&amp;self.pool)</w:t></w:r></w:p><w:p w14:paraId="1034A79C" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        .await?;</w:t></w:r></w:p><w:p w14:paraId="4F0EC511" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="04AAFC44" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        Ok(rows</w:t></w:r></w:p><w:p w14:paraId="2E9C5D13" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            .into_iter()</w:t></w:r></w:p><w:p w14:paraId="3FAB675C" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            .map(|row| (row.get("fetched_at"), row.get("payload")))</w:t></w:r></w:p><w:p w14:paraId="2DA91CE0" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">            </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>.collect())</w:t></w:r></w:p><w:p w14:paraId="4BC578CB" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>    }</w:t></w:r></w:p><w:p w14:paraId="71B7DF28" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="35F8F273" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr></w:p><w:p w14:paraId="2A79F56E" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>// Использование в handlers (БЕЗ SQL):</w:t></w:r></w:p><w:p w14:paraId="23C933A9" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>pub async fn last_iss(State(state): State&lt;AppState&gt;) -&gt; ApiResult&lt;Value&gt; {</w:t></w:r></w:p><w:p w14:paraId="78CFA4CC" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    let repo = &amp;state.iss_repo;</w:t></w:r></w:p><w:p w14:paraId="50F20E1C" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    let log = repo.find_last().await?; // </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>Простой</w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>вызов</w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>метода</w:t></w:r></w:p><w:p w14:paraId="71142681" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="2D161701" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>    match log {</w:t></w:r></w:p><w:p w14:paraId="437D49D2" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        Some(log) =&gt; Ok(ok_response(json!({</w:t></w:r></w:p><w:p w14:paraId="3885C991" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            "id": log.id,</w:t></w:r></w:p><w:p w14:paraId="7F929611" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            "fetched_at": log.fetched_at,</w:t></w:r></w:p><w:p w14:paraId="3593F493" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            "source_url": log.source_url,</w:t></w:r></w:p><w:p w14:paraId="081A828C" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>            "payload": log.payload</w:t></w:r></w:p><w:p w14:paraId="7C0EF1D9" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        }))),</w:t></w:r></w:p><w:p w14:paraId="64610C7D" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t>        None =&gt; Err(ApiError::not_found("No ISS data available")),</w:t></w:r></w:p><w:p w14:paraId="7A28FE95" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="11BB9EE8" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="33A3FE96" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr></w:p><w:p w14:paraId="29E57577" w14:textId="6734DECF" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Что это изменило:</w:t></w:r></w:p><w:p w14:paraId="62D826ED" w14:textId="725647ED" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="11"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Вся работа с БД изолирована в репозиториях</w:t></w:r></w:p><w:p w14:paraId="195A43FE" w14:textId="006DE598" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="11"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Нет SQL в handlers/services - только вызовы методов</w:t></w:r></w:p><w:p w14:paraId="36EF1E59" w14:textId="5F7E249F" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="11"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:lastRenderedPageBreak/><w:t>Легко мокировать репозитории для тестов</w:t></w:r></w:p><w:p w14:paraId="0E6C0338" w14:textId="4E8EE551" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="11"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Правильная типизация TIMESTAMPTZ → DateTime&lt;Utc&gt;</w:t></w:r></w:p><w:p w14:paraId="60C42860" w14:textId="454CF537" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="11"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Можно менять БД без изменения бизнес-логики</w:t></w:r></w:p><w:p w14:paraId="604DCB15" w14:textId="1C6A79EB" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="11"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Повторное использование методов репозитория</w:t></w:r></w:p><w:p w14:paraId="5C514060" w14:textId="77777777" w:rsidR="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr></w:p><w:p w14:paraId="0AC2BDFF" w14:textId="77777777" w:rsidR="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr></w:p><w:p w14:paraId="07E83E33" w14:textId="77777777" w:rsidR="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t xml:space="preserve"> 5. `src/clients.rs` </w:t></w:r></w:p><w:p w14:paraId="743BD2CD" w14:textId="25B65429" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>ДО: простые запросы без retry и обработки ошибок</w:t></w:r></w:p><w:p w14:paraId="3612E873" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>async fn fetch_iss_data(url: &amp;str) -&gt; Result&lt;Value, Box&lt;dyn std::error::Error&gt;&gt; {</w:t></w:r></w:p><w:p w14:paraId="0E6C65DD" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    let client = reqwest::Client::new();</w:t></w:r></w:p><w:p w14:paraId="6F8C79D8" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    let resp = client.get(url).send().await?; // </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Нет</w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> timeout, </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>нет</w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> retry</w:t></w:r></w:p><w:p w14:paraId="7B2B33E6" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="4372F611" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    if resp.status().is_success() {</w:t></w:r></w:p><w:p w14:paraId="2C56B93A" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        Ok(resp.json().await?)</w:t></w:r></w:p><w:p w14:paraId="160CB1C0" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    } else {</w:t></w:r></w:p><w:p w14:paraId="000BD7C3" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        Err(format!("HTTP {}", resp.status()).into())</w:t></w:r></w:p><w:p w14:paraId="6161127A" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    }</w:t></w:r></w:p><w:p w14:paraId="640ECCD4" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="26D4C7D2" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="4C027EDB" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>async fn fetch_nasa_data(url: &amp;str, api_key: &amp;str) -&gt; Result&lt;Value, Box&lt;dyn std::error::Error&gt;&gt; {</w:t></w:r></w:p><w:p w14:paraId="16C980E9" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    let client = reqwest::Client::new();</w:t></w:r></w:p><w:p w14:paraId="4B632CF5" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>// Разные способы вызова в разных местах</w:t></w:r></w:p><w:p w14:paraId="36C08354" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>let resp = client</w:t></w:r></w:p><w:p w14:paraId="127AFC91" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        .get(url)</w:t></w:r></w:p><w:p w14:paraId="1338125B" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        .header("X-API-Key", api_key)</w:t></w:r></w:p><w:p w14:paraId="6924F211" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        .send().await?;</w:t></w:r></w:p><w:p w14:paraId="49675B2E" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="1D21C7DC" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    // </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Нет</w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>обработки</w:t></w:r><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> 403, 404, timeout</w:t></w:r></w:p><w:p w14:paraId="33FCF5B9" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    resp.json().await</w:t></w:r></w:p><w:p w14:paraId="0A6B99E5" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="00E17422"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="1B9A6EF2" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:lastRenderedPageBreak/><w:t>ПОСЛЕ: единый HTTP клиент с retry, timeout, обработкой ошибок</w:t></w:r></w:p><w:p w14:paraId="0E9F0598" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr></w:p><w:p w14:paraId="05A65D3B" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>use std::time::Duration;</w:t></w:r></w:p><w:p w14:paraId="5A535F13" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>use reqwest::Client;</w:t></w:r></w:p><w:p w14:paraId="4B73300C" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="1D071587" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>#[derive(Clone)]</w:t></w:r></w:p><w:p w14:paraId="33D1955D" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>pub struct HttpClient {</w:t></w:r></w:p><w:p w14:paraId="0A5BE8E8" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    client: Client,</w:t></w:r></w:p><w:p w14:paraId="0302B0C6" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    config: ExternalConfig,</w:t></w:r></w:p><w:p w14:paraId="19446104" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="6F4A9C10" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="1C51F8D7" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>impl HttpClient {</w:t></w:r></w:p><w:p w14:paraId="0FC420A8" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    pub fn new(config: ExternalConfig) -&gt; Result&lt;Self&gt; {</w:t></w:r></w:p><w:p w14:paraId="72258A9F" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        let client = Client::builder()</w:t></w:r></w:p><w:p w14:paraId="2543DB71" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">            .timeout(config.timeout) // </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Централизованный</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> timeout</w:t></w:r></w:p><w:p w14:paraId="37464442" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">            .user_agent(&amp;config.user_agent) // </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Единый</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> User-Agent</w:t></w:r></w:p><w:p w14:paraId="1DB57963" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>            .build()?;</w:t></w:r></w:p><w:p w14:paraId="55FE8389" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">        </w:t></w:r></w:p><w:p w14:paraId="2008FDEE" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        Ok(Self { client, config })</w:t></w:r></w:p><w:p w14:paraId="1402612A" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="3A564999" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr></w:p><w:p w14:paraId="1B52350C" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>    // Метод с автоматическими retry и exponential backoff</w:t></w:r></w:p><w:p w14:paraId="3BC9C542" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>pub async fn get_with_retries(</w:t></w:r></w:p><w:p w14:paraId="46A13BC9" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        &amp;self,</w:t></w:r></w:p><w:p w14:paraId="327F5A73" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        url: &amp;str,</w:t></w:r></w:p><w:p w14:paraId="5ABDABBE" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        max_retries: u32,</w:t></w:r></w:p><w:p w14:paraId="39727A2E" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        retry_delay: Duration,</w:t></w:r></w:p><w:p w14:paraId="77C60E99" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    ) -&gt; Result&lt;Value&gt; {</w:t></w:r></w:p><w:p w14:paraId="042B0643" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        let mut last_error = None;</w:t></w:r></w:p><w:p w14:paraId="019BE36E" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="54709115" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:lastRenderedPageBreak/><w:t>        for attempt in 0..=max_retries {</w:t></w:r></w:p><w:p w14:paraId="7D7AAD37" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>            match self.client.get(url).send().await {</w:t></w:r></w:p><w:p w14:paraId="6654136F" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                Ok(resp) =&gt; {</w:t></w:r></w:p><w:p w14:paraId="427A7E4A" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                    let status = resp.status();</w:t></w:r></w:p><w:p w14:paraId="704BA51C" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                    if status.is_success() {</w:t></w:r></w:p><w:p w14:paraId="210A2746" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                        match resp.json::&lt;Value&gt;().await {</w:t></w:r></w:p><w:p w14:paraId="1D9164E6" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                            Ok(json) =&gt; {</w:t></w:r></w:p><w:p w14:paraId="6DD8956E" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                                if attempt &gt; 0 {</w:t></w:r></w:p><w:p w14:paraId="28E9A0E9" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                                    info!("Success after {} retries for {}", attempt, url);</w:t></w:r></w:p><w:p w14:paraId="25CEDF8A" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                                }</w:t></w:r></w:p><w:p w14:paraId="0C628342" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                                return Ok(json);</w:t></w:r></w:p><w:p w14:paraId="3A523173" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                            }</w:t></w:r></w:p><w:p w14:paraId="7E3FE4A3" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                            Err(e) =&gt; {</w:t></w:r></w:p><w:p w14:paraId="74333593" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                                last_error = Some(anyhow::anyhow!("JSON parse error: {}", e));</w:t></w:r></w:p><w:p w14:paraId="6B9B4C0D" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                                if attempt &lt; max_retries {</w:t></w:r></w:p><w:p w14:paraId="3FC16E1B" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">                                    warn!("JSON parse error, retrying... (attempt {}/{})", </w:t></w:r></w:p><w:p w14:paraId="7AA9E47C" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                                          attempt + 1, max_retries + 1);</w:t></w:r></w:p><w:p w14:paraId="62AF71B7" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                                    tokio::time::sleep(retry_delay).await;</w:t></w:r></w:p><w:p w14:paraId="7FAA5F4E" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                                    continue;</w:t></w:r></w:p><w:p w14:paraId="46172DC5" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                                }</w:t></w:r></w:p><w:p w14:paraId="0243B0EB" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                            }</w:t></w:r></w:p><w:p w14:paraId="79E6CC62" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                        }</w:t></w:r></w:p><w:p w14:paraId="263BC178" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                    } else if status == 403 {</w:t></w:r></w:p><w:p w14:paraId="5D79D85B" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">                        // </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Специальная</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>обработка</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> 403</w:t></w:r></w:p><w:p w14:paraId="266E0B01" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                        error!("Upstream 403 Forbidden for {}", url);</w:t></w:r></w:p><w:p w14:paraId="66A8E713" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                        return Err(ApiError::upstream_403(</w:t></w:r></w:p><w:p w14:paraId="78B5A934" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                            format!("Upstream returned 403 for {}", url)</w:t></w:r></w:p><w:p w14:paraId="6C291FE8" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                        ).into());</w:t></w:r></w:p><w:p w14:paraId="00B9F667" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                    } else if status == 404 {</w:t></w:r></w:p><w:p w14:paraId="792E8F47" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">                        // </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Специальная</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>обработка</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> 404</w:t></w:r></w:p><w:p w14:paraId="0A3B8A0A" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:lastRenderedPageBreak/><w:t>                        error!("Upstream 404 Not Found for {}", url);</w:t></w:r></w:p><w:p w14:paraId="292B4839" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                        return Err(ApiError::not_found(</w:t></w:r></w:p><w:p w14:paraId="7C7E7B16" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                            format!("Resource not found: {}", url)</w:t></w:r></w:p><w:p w14:paraId="1B44E6AB" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                        ).into());</w:t></w:r></w:p><w:p w14:paraId="3D51E259" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                    } else {</w:t></w:r></w:p><w:p w14:paraId="09653AF7" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                        last_error = Some(anyhow::anyhow!("HTTP {} for {}", status, url));</w:t></w:r></w:p><w:p w14:paraId="0B93C5EA" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">                        // Retry </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>только</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>для</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> server errors (5xx)</w:t></w:r></w:p><w:p w14:paraId="3F1C4D9E" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                        if attempt &lt; max_retries &amp;&amp; status.is_server_error() {</w:t></w:r></w:p><w:p w14:paraId="3BDA754C" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">                            warn!("Server error {}, retrying... (attempt {}/{})", </w:t></w:r></w:p><w:p w14:paraId="46D2C8B7" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                                  status, attempt + 1, max_retries + 1);</w:t></w:r></w:p><w:p w14:paraId="1F6AE1BC" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                            // Exponential backoff</w:t></w:r></w:p><w:p w14:paraId="6262A730" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                            let delay = retry_delay * (attempt + 1);</w:t></w:r></w:p><w:p w14:paraId="7DB4B79F" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                            tokio::time::sleep(delay).await;</w:t></w:r></w:p><w:p w14:paraId="18F55124" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                            continue;</w:t></w:r></w:p><w:p w14:paraId="163687A8" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                        }</w:t></w:r></w:p><w:p w14:paraId="44FEE6A3" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                    }</w:t></w:r></w:p><w:p w14:paraId="01E2D44F" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                }</w:t></w:r></w:p><w:p w14:paraId="75F78D0C" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                Err(e) =&gt; {</w:t></w:r></w:p><w:p w14:paraId="34EB07F6" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">                    // Retry </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>для</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> network errors</w:t></w:r></w:p><w:p w14:paraId="379D49DA" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                    last_error = Some(anyhow::Error::from(e));</w:t></w:r></w:p><w:p w14:paraId="2826EFBC" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                    if attempt &lt; max_retries {</w:t></w:r></w:p><w:p w14:paraId="78C7DA55" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">                        warn!("Request error, retrying... (attempt {}/{})", </w:t></w:r></w:p><w:p w14:paraId="260FE352" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                              attempt + 1, max_retries + 1);</w:t></w:r></w:p><w:p w14:paraId="4A907EC1" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                        let delay = retry_delay * (attempt + 1); // Exponential backoff</w:t></w:r></w:p><w:p w14:paraId="245B9445" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                        tokio::time::sleep(delay).await;</w:t></w:r></w:p><w:p w14:paraId="6853F2F5" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="009A1F1A" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">                        </w:t></w:r><w:r w:rsidRPr="009A1F1A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>continue;</w:t></w:r></w:p><w:p w14:paraId="779C7D50" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="009A1F1A" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="009A1F1A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                    }</w:t></w:r></w:p><w:p w14:paraId="49805DDF" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="009A1F1A" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="009A1F1A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                }</w:t></w:r></w:p><w:p w14:paraId="5C9E1EEF" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="009A1F1A" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="009A1F1A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>            }</w:t></w:r></w:p><w:p w14:paraId="39159862" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="009A1F1A" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="009A1F1A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        }</w:t></w:r></w:p><w:p w14:paraId="0C83AE1D" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="009A1F1A" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="32BB3F17" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="009A1F1A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">        </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">Err(anyhow::anyhow!("Request failed after {} retries: {:?}", </w:t></w:r></w:p><w:p w14:paraId="547023CE" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">                            </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>max_retries, last_error))</w:t></w:r></w:p><w:p w14:paraId="6D1A767E" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>    }</w:t></w:r></w:p><w:p w14:paraId="2B40A5C1" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="6A2398D4" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr></w:p><w:p w14:paraId="72AAF44C" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>// Специализированные клиенты</w:t></w:r></w:p><w:p w14:paraId="236B0E68" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>pub struct IssClient {</w:t></w:r></w:p><w:p w14:paraId="5D147CED" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    http: HttpClient,</w:t></w:r></w:p><w:p w14:paraId="7609856F" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    base_url: String,</w:t></w:r></w:p><w:p w14:paraId="6650DE65" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="4770B842" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="4A59A793" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>impl IssClient {</w:t></w:r></w:p><w:p w14:paraId="6C7E85F2" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    pub fn new(http: HttpClient, base_url: String) -&gt; Self {</w:t></w:r></w:p><w:p w14:paraId="4CE5830F" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        Self { http, base_url }</w:t></w:r></w:p><w:p w14:paraId="1BE1B0E4" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    }</w:t></w:r></w:p><w:p w14:paraId="3C4BD785" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="4497E81A" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    pub async fn fetch_current(&amp;self) -&gt; Result&lt;Value&gt; {</w:t></w:r></w:p><w:p w14:paraId="12AFFEAC" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        self.http.get_with_retries(&amp;self.base_url, 2, Duration::from_secs(2)).await</w:t></w:r></w:p><w:p w14:paraId="04C9BC11" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    }</w:t></w:r></w:p><w:p w14:paraId="4A4098C3" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="2B3160B6" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="2057E0DD" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>pub struct NasaClient {</w:t></w:r></w:p><w:p w14:paraId="665A4158" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    http: HttpClient,</w:t></w:r></w:p><w:p w14:paraId="2F89BC9D" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    base_url: String,</w:t></w:r></w:p><w:p w14:paraId="52159F3D" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    api_key: String,</w:t></w:r></w:p><w:p w14:paraId="228AB696" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="3E8B60A6" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="04079713" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>impl NasaClient {</w:t></w:r></w:p><w:p w14:paraId="323B746B" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    pub async fn get_apod(&amp;self) -&gt; Result&lt;Value&gt; {</w:t></w:r></w:p><w:p w14:paraId="2DEDEF69" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:lastRenderedPageBreak/><w:t>        let url = format!("{}/planetary/apod?api_key={}", self.base_url, self.api_key);</w:t></w:r></w:p><w:p w14:paraId="1C064E03" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        self.http.get_with_retries(&amp;url, 2, Duration::from_secs(2)).await</w:t></w:r></w:p><w:p w14:paraId="38EB8BC7" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    }</w:t></w:r></w:p><w:p w14:paraId="3F5E1E18" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="18B55F87" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="011E8B99" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">// </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Использование</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>:</w:t></w:r></w:p><w:p w14:paraId="0BDE1FFD" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>let http_client = HttpClient::new(config.external.clone())?;</w:t></w:r></w:p><w:p w14:paraId="637DD140" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>let iss_client = IssClient::new(http_client.clone(), url.clone());</w:t></w:r></w:p><w:p w14:paraId="6CD16D42" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">let json = iss_client.fetch_current().await?; // </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Автоматические</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> retry</w:t></w:r></w:p><w:p w14:paraId="06BD283C" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="00E17422" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="463FF6C5" w14:textId="77777777" w:rsidR="00E17422" w:rsidRPr="008B11D7" w:rsidRDefault="00E17422" w:rsidP="00E17422"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="6864C2DF" w14:textId="00911E02" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Что это изменило:</w:t></w:r></w:p><w:p w14:paraId="7C94C49E" w14:textId="4AF34807" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="12"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Автоматические retry для временных сбоев (network errors, 5xx)</w:t></w:r></w:p><w:p w14:paraId="7247D8E8" w14:textId="0362F21E" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="12"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Exponential backoff для предотвращения перегрузки API</w:t></w:r></w:p><w:p w14:paraId="495931B2" w14:textId="478A93FB" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="12"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Единый User-Agent для всех запросов (защита от бана)</w:t></w:r></w:p><w:p w14:paraId="7DD4456A" w14:textId="1BD1876F" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="12"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Централизованный timeout</w:t></w:r></w:p><w:p w14:paraId="5377E5D9" w14:textId="311D48B7" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="12"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Специальная обработка 403, 404 (не retry, а сразу ошибка)</w:t></w:r></w:p><w:p w14:paraId="39B996DD" w14:textId="0AA8F498" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="12"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Логирование всех попыток retry</w:t></w:r></w:p><w:p w14:paraId="1FDD7EBE" w14:textId="1F074BEB" w:rsidR="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="12"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Легко тестировать (можно мокировать HttpClient)</w:t></w:r></w:p><w:p w14:paraId="0F41CACA" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr></w:p><w:p w14:paraId="0927800F" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr></w:p><w:p w14:paraId="48EFE32A" w14:textId="7B97C0DD" w:rsidR="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>6. src/services.rs</w:t></w:r></w:p><w:p w14:paraId="3C44D8D4" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr></w:p><w:p w14:paraId="6712634D" w14:textId="0FC4CA71" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>ДО: бизнес-логика смешана с HTTP обработкой</w:t></w:r></w:p><w:p w14:paraId="4778666D" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>async fn last_iss(State(st): State&lt;AppState&gt;)</w:t></w:r></w:p><w:p w14:paraId="70FE3B30" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>-&gt; Result&lt;Json&lt;Value&gt;, (StatusCode, String)&gt; {</w:t></w:r></w:p><w:p w14:paraId="6431873D" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    // SQL </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>запрос</w:t></w:r></w:p><w:p w14:paraId="5B1E1117" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    let row_opt = sqlx::query("SELECT ... FROM iss_fetch_log ...")</w:t></w:r></w:p><w:p w14:paraId="2B8288B5" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        .fetch_optional(&amp;st.pool).await?;</w:t></w:r></w:p><w:p w14:paraId="49C34A11" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="63FD3E7F" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>// Бизнес-логика обработки данных</w:t></w:r></w:p><w:p w14:paraId="0553838E" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>    if let Some(row) = row_opt {</w:t></w:r></w:p><w:p w14:paraId="6FEA83E6" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:lastRenderedPageBreak/><w:t xml:space="preserve">        </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>let payload: Value = row.get("payload");</w:t></w:r></w:p><w:p w14:paraId="12D2F9EE" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        let lat = payload["latitude"].as_f64();</w:t></w:r></w:p><w:p w14:paraId="42CADE2D" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        let lon = payload["longitude"].as_f64();</w:t></w:r></w:p><w:p w14:paraId="7BBA3F75" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">        // ... </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>обработка</w:t></w:r></w:p><w:p w14:paraId="332166E9" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    }</w:t></w:r></w:p><w:p w14:paraId="2375D8C8" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    // ...</w:t></w:r></w:p><w:p w14:paraId="7B0A25DA" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="4F5B1B0C" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="75298920" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>async fn iss_trend(State(st): State&lt;AppState&gt;, Query(params): Query&lt;HashMap&lt;String, String&gt;&gt;)</w:t></w:r></w:p><w:p w14:paraId="557E94CC" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>-&gt; Result&lt;Json&lt;Value&gt;, (StatusCode, String)&gt; {</w:t></w:r></w:p><w:p w14:paraId="741F3FD5" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    let limit = params.get("limit")...;</w:t></w:r></w:p><w:p w14:paraId="6DE0B388" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="60544AA3" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    // SQL + </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>бизнес</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>-</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>логика</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>расчёта</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>тренда</w:t></w:r></w:p><w:p w14:paraId="1CC02E27" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    let rows = sqlx::query("SELECT ...").fetch_all(&amp;st.pool).await?;</w:t></w:r></w:p><w:p w14:paraId="13B746F7" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="792A3F6E" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    if rows.len() &lt; 2 {</w:t></w:r></w:p><w:p w14:paraId="64D046A9" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        return Ok(Json(json!({"movement": false})));</w:t></w:r></w:p><w:p w14:paraId="2533AA39" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    }</w:t></w:r></w:p><w:p w14:paraId="4A16049A" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="49BB751E" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    // </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Алгоритм</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> Haversine </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>прямо</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>в</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> handler</w:t></w:r></w:p><w:p w14:paraId="3788CC53" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    let (t1, p1) = &amp;rows[0];</w:t></w:r></w:p><w:p w14:paraId="1613707C" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    let (t2, p2) = &amp;rows[1];</w:t></w:r></w:p><w:p w14:paraId="02CF00D8" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    let lat1 = p1["latitude"].as_f64().unwrap();</w:t></w:r></w:p><w:p w14:paraId="5A600FFF" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    let lon1 = p1["longitude"].as_f64().unwrap();</w:t></w:r></w:p><w:p w14:paraId="325285F4" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>// ... 50+ строк расчёта</w:t></w:r></w:p><w:p w14:paraId="22E9A3BB" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="01725B3F" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr></w:p><w:p w14:paraId="1408F15C" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr></w:p><w:p w14:paraId="06D7E657" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr></w:p><w:p w14:paraId="42D464DB" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>ПОСЛЕ: бизнес-логика в отдельном слое</w:t></w:r></w:p><w:p w14:paraId="692DED43" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr></w:p><w:p w14:paraId="21F41D07" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>use crate::clients::{IssClient, NasaClient};</w:t></w:r></w:p><w:p w14:paraId="2D0A486C" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>use crate::repo::{IssRepo, OsdrRepo};</w:t></w:r></w:p><w:p w14:paraId="7E891785" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>use crate::domain::{Trend, haversine_km, extract_f64};</w:t></w:r></w:p><w:p w14:paraId="6C5843AC" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="11290F27" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>pub struct IssService {</w:t></w:r></w:p><w:p w14:paraId="6F3713C5" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    repo: IssRepo,</w:t></w:r></w:p><w:p w14:paraId="2EFE6D25" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    client: IssClient,</w:t></w:r></w:p><w:p w14:paraId="71ADF297" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="39407601" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="78FBD49C" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>impl IssService {</w:t></w:r></w:p><w:p w14:paraId="7018531D" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    pub fn new(repo: IssRepo, client: IssClient) -&gt; Self {</w:t></w:r></w:p><w:p w14:paraId="703975D8" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">        </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Self { repo, client }</w:t></w:r></w:p><w:p w14:paraId="676AD87A" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>    }</w:t></w:r></w:p><w:p w14:paraId="08FFA7A6" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr></w:p><w:p w14:paraId="52CF5149" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>    // Получение последних данных</w:t></w:r></w:p><w:p w14:paraId="766E5062" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>pub async fn get_last(&amp;self) -&gt; Result&lt;Option&lt;crate::domain::IssFetchLog&gt;&gt; {</w:t></w:r></w:p><w:p w14:paraId="010EAAE7" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        self.repo.find_last().await.map_err(Into::into)</w:t></w:r></w:p><w:p w14:paraId="2ABF1797" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    }</w:t></w:r></w:p><w:p w14:paraId="7FF8D41E" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="07EE8D8F" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    // </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Загрузка</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>и</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>сохранение</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>данных</w:t></w:r></w:p><w:p w14:paraId="65B94C30" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    pub async fn fetch_and_store(&amp;self, source_url: &amp;str) -&gt; Result&lt;()&gt; {</w:t></w:r></w:p><w:p w14:paraId="10ACB1D8" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        let json = self.client.fetch_current().await?;</w:t></w:r></w:p><w:p w14:paraId="4C2F6E3B" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        self.repo.create(source_url, json).await?;</w:t></w:r></w:p><w:p w14:paraId="52A4A134" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        info!("ISS data fetched and stored");</w:t></w:r></w:p><w:p w14:paraId="10C92495" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">        </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Ok(())</w:t></w:r></w:p><w:p w14:paraId="0F8D0FB2" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>    }</w:t></w:r></w:p><w:p w14:paraId="319FCF8B" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr></w:p><w:p w14:paraId="5AE9E3F5" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>    // Расчёт тренда движения (бизнес-логика вынесена)</w:t></w:r></w:p><w:p w14:paraId="59DB0D63" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>pub async fn calculate_trend(&amp;self, limit: i64) -&gt; Result&lt;Trend&gt; {</w:t></w:r></w:p><w:p w14:paraId="439D7192" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:lastRenderedPageBreak/><w:t>        let rows = self.repo.find_recent_for_trend(limit).await?;</w:t></w:r></w:p><w:p w14:paraId="0A1AC961" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="40AC51D3" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        if rows.len() &lt; 2 {</w:t></w:r></w:p><w:p w14:paraId="2DCBDF59" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>            return Ok(Trend {</w:t></w:r></w:p><w:p w14:paraId="01442F0E" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                movement: false,</w:t></w:r></w:p><w:p w14:paraId="2FCDD7C5" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                delta_km: 0.0,</w:t></w:r></w:p><w:p w14:paraId="06DB7670" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                dt_sec: 0.0,</w:t></w:r></w:p><w:p w14:paraId="2C5B6BCF" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                velocity_kmh: None,</w:t></w:r></w:p><w:p w14:paraId="4A43C079" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                // ...</w:t></w:r></w:p><w:p w14:paraId="243BC31B" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>            });</w:t></w:r></w:p><w:p w14:paraId="23B89636" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        }</w:t></w:r></w:p><w:p w14:paraId="7B676051" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="47E7074D" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">        let (t2, p2) = &amp;rows[0]; // </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Новейшая</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>запись</w:t></w:r></w:p><w:p w14:paraId="050FE2D4" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">        </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>let (t1, p1) = &amp;rows[1]; // Предыдущая</w:t></w:r></w:p><w:p w14:paraId="4D7D87ED" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr></w:p><w:p w14:paraId="63D46FAE" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>        // Извлечение координат через helper функции</w:t></w:r></w:p><w:p w14:paraId="67CD4538" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t xml:space="preserve">        </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>let lat1 = extract_f64(p1, &amp;["latitude"]);</w:t></w:r></w:p><w:p w14:paraId="48E55B79" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        let lon1 = extract_f64(p1, &amp;["longitude"]);</w:t></w:r></w:p><w:p w14:paraId="21F2FA8A" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        let lat2 = extract_f64(p2, &amp;["latitude"]);</w:t></w:r></w:p><w:p w14:paraId="018241D9" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        let lon2 = extract_f64(p2, &amp;["longitude"]);</w:t></w:r></w:p><w:p w14:paraId="7D24E0C5" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        let v2 = extract_f64(p2, &amp;["velocity"]);</w:t></w:r></w:p><w:p w14:paraId="0ACFD597" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="6241AFC9" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">        // </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Расчёт</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>расстояния</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>через</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>алгоритм</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> Haversine</w:t></w:r></w:p><w:p w14:paraId="0D019920" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        let mut delta_km = 0.0;</w:t></w:r></w:p><w:p w14:paraId="115C11B5" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        let mut movement = false;</w:t></w:r></w:p><w:p w14:paraId="141FFF42" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        if let (Some(a1), Some(o1), Some(a2), Some(o2)) = (lat1, lon1, lat2, lon2) {</w:t></w:r></w:p><w:p w14:paraId="2A904ACA" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>            delta_km = haversine_km(a1, o1, a2, o2);</w:t></w:r></w:p><w:p w14:paraId="7C91E99E" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">            movement = delta_km &gt; 0.1; // </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Порог</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>движения</w:t></w:r></w:p><w:p w14:paraId="04BC421F" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        }</w:t></w:r></w:p><w:p w14:paraId="45414C25" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="7512F9B6" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:lastRenderedPageBreak/><w:t>        let dt_sec = (t2.timestamp() - t1.timestamp()) as f64;</w:t></w:r></w:p><w:p w14:paraId="7402A5E3" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="24A2EF86" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="009A1F1A" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">        </w:t></w:r><w:r w:rsidRPr="009A1F1A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>Ok(Trend {</w:t></w:r></w:p><w:p w14:paraId="19CBBD7A" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="009A1F1A" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="009A1F1A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>            movement,</w:t></w:r></w:p><w:p w14:paraId="3830A3F9" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="009A1F1A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">            </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>delta_km,</w:t></w:r></w:p><w:p w14:paraId="3D0F5934" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>            dt_sec,</w:t></w:r></w:p><w:p w14:paraId="10DE0040" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>            velocity_kmh: v2,</w:t></w:r></w:p><w:p w14:paraId="2FBC615B" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>            from_time: Some(*t1),</w:t></w:r></w:p><w:p w14:paraId="68EFAC2F" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>            to_time: Some(*t2),</w:t></w:r></w:p><w:p w14:paraId="4DAD75E5" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>            from_lat: lat1,</w:t></w:r></w:p><w:p w14:paraId="12909E79" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>            from_lon: lon1,</w:t></w:r></w:p><w:p w14:paraId="511C37FC" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>            to_lat: lat2,</w:t></w:r></w:p><w:p w14:paraId="429CA8F2" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>            to_lon: lon2,</w:t></w:r></w:p><w:p w14:paraId="0F0A230F" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">        </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>})</w:t></w:r></w:p><w:p w14:paraId="12EFB372" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>    }</w:t></w:r></w:p><w:p w14:paraId="10C3CA59" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="42367912" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr></w:p><w:p w14:paraId="3ECF7EFB" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>// Функции для Advisory Locks (защита от наложения фоновых задач)</w:t></w:r></w:p><w:p w14:paraId="39473C0D" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>pub async fn acquire_lock(pool: &amp;PgPool, lock_id: i64) -&gt; Result&lt;bool&gt; {</w:t></w:r></w:p><w:p w14:paraId="7CD78288" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    let row = sqlx::query_scalar("SELECT pg_try_advisory_lock($1)")</w:t></w:r></w:p><w:p w14:paraId="72B78401" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        .bind(lock_id)</w:t></w:r></w:p><w:p w14:paraId="05500A16" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        .fetch_one(pool)</w:t></w:r></w:p><w:p w14:paraId="6A9F9ADF" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        .await?;</w:t></w:r></w:p><w:p w14:paraId="080555A6" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    Ok(row.unwrap_or(false))</w:t></w:r></w:p><w:p w14:paraId="4FB385B7" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="351D911A" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="4A546132" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>pub async fn release_lock(pool: &amp;PgPool, lock_id: i64) -&gt; Result&lt;bool&gt; {</w:t></w:r></w:p><w:p w14:paraId="22219155" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    let row = sqlx::query_scalar("SELECT pg_advisory_unlock($1)")</w:t></w:r></w:p><w:p w14:paraId="7CD13F5E" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        .bind(lock_id)</w:t></w:r></w:p><w:p w14:paraId="02790305" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        .fetch_one(pool)</w:t></w:r></w:p><w:p w14:paraId="777592AE" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:lastRenderedPageBreak/><w:t>        .await?;</w:t></w:r></w:p><w:p w14:paraId="7489226F" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    Ok(row.unwrap_or(false))</w:t></w:r></w:p><w:p w14:paraId="4BFAEB98" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="742CF604" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr></w:p><w:p w14:paraId="7BE6E273" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>// Использование в handlers (БЕЗ бизнес-логики):</w:t></w:r></w:p><w:p w14:paraId="638A3E4D" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>pub async fn iss_trend(State(state): State&lt;AppState&gt;, Query(params): Query&lt;HashMap&lt;String, String&gt;&gt;)</w:t></w:r></w:p><w:p w14:paraId="4984F8CC" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>-&gt; ApiResult&lt;Trend&gt; {</w:t></w:r></w:p><w:p w14:paraId="0D49885F" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    let limit = params.get("limit")...;</w:t></w:r></w:p><w:p w14:paraId="59016B51" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="267EF538" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    let service = IssService::new(</w:t></w:r></w:p><w:p w14:paraId="6F92234F" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        state.iss_repo.clone(),</w:t></w:r></w:p><w:p w14:paraId="54616FDB" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">        </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>state.iss_client.clone(),</w:t></w:r></w:p><w:p w14:paraId="390CFC9A" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>    );</w:t></w:r></w:p><w:p w14:paraId="424363D5" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="2E59AB96" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>    // Просто делегирование сервису</w:t></w:r></w:p><w:p w14:paraId="41185EBA" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>service.calculate_trend(limit).await</w:t></w:r></w:p><w:p w14:paraId="5EF6D91D" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        .map(ok_response)</w:t></w:r></w:p><w:p w14:paraId="3EF41BAE" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">        </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>.map_err(ApiError::from)</w:t></w:r></w:p><w:p w14:paraId="35D6BC80" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="5DD5D16F" w14:textId="77777777" w:rsidR="00B26C44" w:rsidRDefault="00B26C44"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr></w:p><w:p w14:paraId="541DDE29" w14:textId="0832FF6E" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Что это изменило:</w:t></w:r></w:p><w:p w14:paraId="18E0BC30" w14:textId="1AFA0FB3" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="13"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Бизнес-логика отделена от HTTP слоя</w:t></w:r></w:p><w:p w14:paraId="1330C77D" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="13"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Можно тестировать сервисы без HTTP/БД (mock репозитории и клиенты)</w:t></w:r></w:p><w:p w14:paraId="20302843" w14:textId="01577504" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="13"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Можно переиспользовать в других контекстах (CLI, фоновые задачи)</w:t></w:r></w:p><w:p w14:paraId="728562BC" w14:textId="1BCC2295" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="13"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Легко изменять алгоритмы (например, Haversine) без изменения handlers</w:t></w:r></w:p><w:p w14:paraId="60FBF83A" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRDefault="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr></w:p><w:p w14:paraId="687C4E00" w14:textId="4658A2AF" w:rsidR="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>7. src/handlers.rs</w:t></w:r></w:p><w:p w14:paraId="5877328C" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr></w:p><w:p w14:paraId="65F9E2CF" w14:textId="6FDB1147" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>ДО: handlers содержат SQL, бизнес-логику и обработку ошибок</w:t></w:r></w:p><w:p w14:paraId="3E7EFB36" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">async fn last_iss(State(st): State&lt;AppState&gt;) </w:t></w:r></w:p><w:p w14:paraId="2878228E" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:lastRenderedPageBreak/><w:t>-&gt; Result&lt;Json&lt;Value&gt;, (StatusCode, String)&gt; {</w:t></w:r></w:p><w:p w14:paraId="23D2768F" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    // </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Прямой</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> SQL </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>запрос</w:t></w:r></w:p><w:p w14:paraId="5C1AFEAD" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    let row_opt = sqlx::query(</w:t></w:r></w:p><w:p w14:paraId="12A90B91" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        "SELECT id, fetched_at, source_url, payload</w:t></w:r></w:p><w:p w14:paraId="7A2D6F8C" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>         FROM iss_fetch_log</w:t></w:r></w:p><w:p w14:paraId="3C1D3EB4" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>         ORDER BY id DESC</w:t></w:r></w:p><w:p w14:paraId="48FB4825" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>         LIMIT 1"</w:t></w:r></w:p><w:p w14:paraId="6B0B9B97" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    )</w:t></w:r></w:p><w:p w14:paraId="375CDC21" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    .fetch_optional(&amp;st.pool).await</w:t></w:r></w:p><w:p w14:paraId="0075A39A" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    .map_err(|e| (StatusCode::INTERNAL_SERVER_ERROR, e.to_string()))?;</w:t></w:r></w:p><w:p w14:paraId="3C11F49B" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="17E1B7DA" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    // </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Обработка</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>данных</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>прямо</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>в</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> handler</w:t></w:r></w:p><w:p w14:paraId="4956E775" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    if let Some(row) = row_opt {</w:t></w:r></w:p><w:p w14:paraId="25FA555D" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        let id: i64 = row.get("id");</w:t></w:r></w:p><w:p w14:paraId="0FA98CCE" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        let fetched_at: DateTime&lt;Utc&gt; = row.get("fetched_at");</w:t></w:r></w:p><w:p w14:paraId="768B8144" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        let source_url: String = row.get("source_url");</w:t></w:r></w:p><w:p w14:paraId="60EB0403" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        let payload: Value = row.get("payload");</w:t></w:r></w:p><w:p w14:paraId="3305E01A" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">        </w:t></w:r></w:p><w:p w14:paraId="03730656" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">        // </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Бизнес</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>-</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>логика</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>обработки</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> payload</w:t></w:r></w:p><w:p w14:paraId="6EC6D041" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        let processed_payload = if let Some(lat) = payload["latitude"].as_f64() {</w:t></w:r></w:p><w:p w14:paraId="5C304499" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>            json!({</w:t></w:r></w:p><w:p w14:paraId="42C48C81" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                "latitude": lat,</w:t></w:r></w:p><w:p w14:paraId="094F126C" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                "longitude": payload["longitude"].as_f64(),</w:t></w:r></w:p><w:p w14:paraId="39827FBE" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                "velocity": payload["velocity"].as_f64(),</w:t></w:r></w:p><w:p w14:paraId="5E6B72F0" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>                // ...</w:t></w:r></w:p><w:p w14:paraId="5B255600" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>            })</w:t></w:r></w:p><w:p w14:paraId="42611EA8" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        } else {</w:t></w:r></w:p><w:p w14:paraId="22E1F903" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>            payload</w:t></w:r></w:p><w:p w14:paraId="521AA3BB" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        };</w:t></w:r></w:p><w:p w14:paraId="63082D40" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">        </w:t></w:r></w:p><w:p w14:paraId="4BBCD4CE" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:lastRenderedPageBreak/><w:t>        return Ok(Json(json!({</w:t></w:r></w:p><w:p w14:paraId="263CB389" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>            "id": id,</w:t></w:r></w:p><w:p w14:paraId="01C05A4D" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>            "fetched_at": fetched_at,</w:t></w:r></w:p><w:p w14:paraId="4B54F30B" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>            "source_url": source_url,</w:t></w:r></w:p><w:p w14:paraId="14FCDA3F" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>            "payload": processed_payload</w:t></w:r></w:p><w:p w14:paraId="434D66EC" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        })));</w:t></w:r></w:p><w:p w14:paraId="0B7242E1" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    }</w:t></w:r></w:p><w:p w14:paraId="397C6EBB" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="75B0D03A" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    Ok(Json(json!({"message": "no data"})))</w:t></w:r></w:p><w:p w14:paraId="1B31282D" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="47DEF76D" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="4FC6E976" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">async fn trigger_iss(State(st): State&lt;AppState&gt;) </w:t></w:r></w:p><w:p w14:paraId="1CF73E0B" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>-&gt; Result&lt;Json&lt;Value&gt;, (StatusCode, String)&gt; {</w:t></w:r></w:p><w:p w14:paraId="5413EE3B" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    // </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Прямой</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> HTTP </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>запрос</w:t></w:r></w:p><w:p w14:paraId="1BA73D27" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    let resp = reqwest::get(&amp;st.fallback_url).await</w:t></w:r></w:p><w:p w14:paraId="79E1D456" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        .map_err(|e| (StatusCode::BAD_GATEWAY, e.to_string()))?;</w:t></w:r></w:p><w:p w14:paraId="679BD8E8" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="60DD2B40" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    let json: Value = resp.json().await</w:t></w:r></w:p><w:p w14:paraId="1FD11077" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        .map_err(|e| (StatusCode::BAD_GATEWAY, e.to_string()))?;</w:t></w:r></w:p><w:p w14:paraId="32717362" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="45643B63" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>// SQL запрос для сохранения</w:t></w:r></w:p><w:p w14:paraId="31471510" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>    let row = sqlx::query(</w:t></w:r></w:p><w:p w14:paraId="0EFFE753" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t xml:space="preserve">        </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>"INSERT INTO iss_fetch_log (source_url, payload)</w:t></w:r></w:p><w:p w14:paraId="0A5A0CD5" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>         VALUES ($1, $2)</w:t></w:r></w:p><w:p w14:paraId="3BAB0B44" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>         RETURNING id, fetched_at"</w:t></w:r></w:p><w:p w14:paraId="2BDBF8E9" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    )</w:t></w:r></w:p><w:p w14:paraId="30E8C7E1" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    .bind(&amp;st.fallback_url)</w:t></w:r></w:p><w:p w14:paraId="6D48D648" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    .bind(&amp;json)</w:t></w:r></w:p><w:p w14:paraId="1E51764E" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    .fetch_one(&amp;st.pool).await</w:t></w:r></w:p><w:p w14:paraId="36344269" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    .map_err(|e| (StatusCode::INTERNAL_SERVER_ERROR, e.to_string()))?;</w:t></w:r></w:p><w:p w14:paraId="0DE49934" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:lastRenderedPageBreak/><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="15D61851" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>// Повторный вызов last_iss (дублирование кода)</w:t></w:r></w:p><w:p w14:paraId="516F8649" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>last_iss(State(st)).await</w:t></w:r></w:p><w:p w14:paraId="3E7F7476" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="68DF476B" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="009A1F1A" w:rsidRDefault="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="3615D9E4" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="009A1F1A" w:rsidRDefault="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="694F8A6B" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="009A1F1A" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>ПОСЛЕ</w:t></w:r><w:r w:rsidRPr="009A1F1A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">: handlers </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>только</w:t></w:r><w:r w:rsidRPr="009A1F1A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>маршрутизируют</w:t></w:r><w:r w:rsidRPr="009A1F1A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>запросы</w:t></w:r></w:p><w:p w14:paraId="2B7E21B5" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="009A1F1A" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="20DFF9BE" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="009A1F1A" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="009A1F1A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>use crate::app_state::AppState;</w:t></w:r></w:p><w:p w14:paraId="4B7CB175" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>use crate::error::{ok_response, ApiError, ApiResult};</w:t></w:r></w:p><w:p w14:paraId="09B0C1A1" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>use crate::services::{IssService, OsdrService, SpaceCacheService};</w:t></w:r></w:p><w:p w14:paraId="5D00F515" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="08C71E4B" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>pub async fn last_iss(State(state): State&lt;AppState&gt;) -&gt; ApiResult&lt;Value&gt; {</w:t></w:r></w:p><w:p w14:paraId="59E1D9CB" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    // </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Создание</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>сервиса</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> (DI)</w:t></w:r></w:p><w:p w14:paraId="486D2394" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    let service = IssService::new(</w:t></w:r></w:p><w:p w14:paraId="1DFAAEA6" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        state.iss_repo.clone(),</w:t></w:r></w:p><w:p w14:paraId="350ACD87" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        state.iss_client.clone(),</w:t></w:r></w:p><w:p w14:paraId="7A7B88DC" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    );</w:t></w:r></w:p><w:p w14:paraId="703E5170" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="21C716B9" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    // </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Делегирование</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>бизнес</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>-</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>логики</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>сервису</w:t></w:r></w:p><w:p w14:paraId="6DBF735F" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    match service.get_last().await {</w:t></w:r></w:p><w:p w14:paraId="64B9FE3E" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        Ok(Some(log)) =&gt; Ok(ok_response(serde_json::json!({</w:t></w:r></w:p><w:p w14:paraId="4E5B7EBE" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>            "id": log.id,</w:t></w:r></w:p><w:p w14:paraId="271A2048" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>            "fetched_at": log.fetched_at,</w:t></w:r></w:p><w:p w14:paraId="30553B28" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>            "source_url": log.source_url,</w:t></w:r></w:p><w:p w14:paraId="50CB2E91" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>            "payload": log.payload</w:t></w:r></w:p><w:p w14:paraId="1DC663FE" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        }))),</w:t></w:r></w:p><w:p w14:paraId="5EF6CFA7" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        Ok(None) =&gt; Ok(ok_response(serde_json::json!({"message": "no data"}))),</w:t></w:r></w:p><w:p w14:paraId="3D892557" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">        </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Err(e) =&gt; Err(ApiError::from(e)), // Автоматическое преобразование в ApiError</w:t></w:r></w:p><w:p w14:paraId="516A551E" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="775049EB" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:lastRenderedPageBreak/><w:t>}</w:t></w:r></w:p><w:p w14:paraId="5E30BD65" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="0EDEC3CE" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>pub async fn trigger_iss(State(state): State&lt;AppState&gt;) -&gt; ApiResult&lt;Value&gt; {</w:t></w:r></w:p><w:p w14:paraId="130A6FD5" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    let service = IssService::new(</w:t></w:r></w:p><w:p w14:paraId="1271087C" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        state.iss_repo.clone(),</w:t></w:r></w:p><w:p w14:paraId="155F492D" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        state.iss_client.clone(),</w:t></w:r></w:p><w:p w14:paraId="03870BCF" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    );</w:t></w:r></w:p><w:p w14:paraId="6EDCAA1C" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="2276F0EE" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    let source_url = state.config.external.where_iss_url.clone();</w:t></w:r></w:p><w:p w14:paraId="48059E92" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r></w:p><w:p w14:paraId="1AA12527" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    // </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Вызов</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>бизнес</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>-</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>логики</w:t></w:r></w:p><w:p w14:paraId="331B020A" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    service.fetch_and_store(&amp;source_url).await</w:t></w:r></w:p><w:p w14:paraId="2E2A0E4E" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        .map_err(ApiError::from)?;</w:t></w:r></w:p><w:p w14:paraId="1E73838E" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="508AA16C" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    // </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Повторное</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>использование</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> handler'</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>а</w:t></w:r></w:p><w:p w14:paraId="715F86F8" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    last_iss(State(state)).await</w:t></w:r></w:p><w:p w14:paraId="78C9D705" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="724ACFA0" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="3B0C3439" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>pub async fn iss_trend(</w:t></w:r></w:p><w:p w14:paraId="5E3C355D" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    State(state): State&lt;AppState&gt;,</w:t></w:r></w:p><w:p w14:paraId="46D815A3" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    Query(params): Query&lt;HashMap&lt;String, String&gt;&gt;,</w:t></w:r></w:p><w:p w14:paraId="6AC2FAC9" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>) -&gt; ApiResult&lt;crate::domain::Trend&gt; {</w:t></w:r></w:p><w:p w14:paraId="551BD26D" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    // </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Извлечение</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>параметров</w:t></w:r></w:p><w:p w14:paraId="27647E89" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    let limit = params</w:t></w:r></w:p><w:p w14:paraId="55570690" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        .get("limit")</w:t></w:r></w:p><w:p w14:paraId="06A3B661" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        .and_then(|s| s.parse::&lt;i64&gt;().ok())</w:t></w:r></w:p><w:p w14:paraId="51986893" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        .unwrap_or(2);</w:t></w:r></w:p><w:p w14:paraId="5EF0B83A" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="53D86754" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    let service = IssService::new(</w:t></w:r></w:p><w:p w14:paraId="3000EEB0" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        state.iss_repo.clone(),</w:t></w:r></w:p><w:p w14:paraId="2ED1A25E" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:lastRenderedPageBreak/><w:t>        state.iss_client.clone(),</w:t></w:r></w:p><w:p w14:paraId="3B4EAE1D" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="009A1F1A" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    </w:t></w:r><w:r w:rsidRPr="009A1F1A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>);</w:t></w:r></w:p><w:p w14:paraId="547A70B1" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="009A1F1A" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="78420E30" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="009A1F1A" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="009A1F1A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">    // </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Делегирование</w:t></w:r><w:r w:rsidRPr="009A1F1A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>расчёта</w:t></w:r><w:r w:rsidRPr="009A1F1A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>тренда</w:t></w:r><w:r w:rsidRPr="009A1F1A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>сервису</w:t></w:r></w:p><w:p w14:paraId="19274A1D" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="009A1F1A" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="009A1F1A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    service.calculate_trend(limit).await</w:t></w:r></w:p><w:p w14:paraId="13530BFC" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="009A1F1A"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">        </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">.map(ok_response) // </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Обёртка</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>в</w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve"> SuccessResponse {ok: true, data: ...}</w:t></w:r></w:p><w:p w14:paraId="73FF8707" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">        </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>.map_err(ApiError::from) // Преобразование в единый формат ошибок</w:t></w:r></w:p><w:p w14:paraId="2CEC187F" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="78748AD6" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="29FF379E" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>pub async fn osdr_list(</w:t></w:r></w:p><w:p w14:paraId="3F057640" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    State(state): State&lt;AppState&gt;,</w:t></w:r></w:p><w:p w14:paraId="4F964486" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    Query(params): Query&lt;HashMap&lt;String, String&gt;&gt;,</w:t></w:r></w:p><w:p w14:paraId="52CFA943" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>) -&gt; ApiResult&lt;Vec&lt;crate::domain::OsdrItem&gt;&gt; {</w:t></w:r></w:p><w:p w14:paraId="039D4E5A" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    let limit = params</w:t></w:r></w:p><w:p w14:paraId="44D39276" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        .get("limit")</w:t></w:r></w:p><w:p w14:paraId="03A68273" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        .and_then(|s| s.parse::&lt;i64&gt;().ok())</w:t></w:r></w:p><w:p w14:paraId="25E7377E" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        .unwrap_or(20);</w:t></w:r></w:p><w:p w14:paraId="32489BB7" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="268A8523" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    let service = OsdrService::new(</w:t></w:r></w:p><w:p w14:paraId="2B225866" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        state.osdr_repo.clone(),</w:t></w:r></w:p><w:p w14:paraId="5FA5FBDF" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        state.nasa_client.clone(),</w:t></w:r></w:p><w:p w14:paraId="7DBC8A67" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    );</w:t></w:r></w:p><w:p w14:paraId="45167CF1" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr></w:p><w:p w14:paraId="0AC3F635" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>    service.list(limit).await</w:t></w:r></w:p><w:p w14:paraId="1AC8FBC4" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t>        .map(ok_response)</w:t></w:r></w:p><w:p w14:paraId="2B6F3DA2" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/><w:lang w:val="en-US"/></w:rPr><w:t xml:space="preserve">        </w:t></w:r><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>.map_err(ApiError::from)</w:t></w:r></w:p><w:p w14:paraId="659C48DD" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>}</w:t></w:r></w:p><w:p w14:paraId="31944374" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRDefault="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr></w:p><w:p w14:paraId="4C010D00" w14:textId="59A0A8C5" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Что это изменило:</w:t></w:r></w:p><w:p w14:paraId="5F5CA366" w14:textId="7A705348" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="14"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Handlers стали тонкими (только маршрутизация)</w:t></w:r></w:p><w:p w14:paraId="7FF55731" w14:textId="3F8D4FE7" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="14"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Вся бизнес-логика в сервисах</w:t></w:r></w:p><w:p w14:paraId="021EFC86" w14:textId="2439A577" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="14"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:lastRenderedPageBreak/><w:t>Нет SQL в handlers (только вызовы методов репозиториев через сервисы)</w:t></w:r></w:p><w:p w14:paraId="79CA4EC2" w14:textId="5E606CB5" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="14"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Единый формат ответов через `ok_response()` и `ApiError`</w:t></w:r></w:p><w:p w14:paraId="613C5D84" w14:textId="6DAF79CC" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="14"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Легко добавлять новые endpoints (просто создать handler + вызвать сервис)</w:t></w:r></w:p><w:p w14:paraId="63DC773A" w14:textId="663D9CAE" w:rsidR="008B11D7" w:rsidRPr="008B11D7" w:rsidRDefault="008B11D7" w:rsidP="008B11D7"><w:pPr><w:pStyle w:val="ListParagraph"/><w:numPr><w:ilvl w:val="0"/><w:numId w:val="14"/></w:numPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r w:rsidRPr="008B11D7"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:t>Легко тестировать (можно мокировать сервисы)</w:t></w:r></w:p><w:p w14:paraId="7429B28F" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRDefault="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr></w:p><w:p w14:paraId="73414A22" w14:textId="77777777" w:rsidR="008B11D7" w:rsidRDefault="008B11D7"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr></w:p><w:p w14:paraId="5BCCFB6C" w14:textId="504FEDA7" w:rsidR="002A0CB0" w:rsidRDefault="002A0CB0"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr></w:pPr><w:r w:rsidRPr="002A0CB0"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="28"/><w:szCs w:val="28"/></w:rPr><w:t>Скриншоты работы программы</w:t></w:r><w:r w:rsidRPr="002A0CB0"><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:b/><w:bCs/><w:sz w:val="28"/><w:szCs w:val="28"/><w:lang w:val="en-US"/></w:rPr><w:t>:</w:t></w:r></w:p><w:p w14:paraId="1C7CF068" w14:textId="15CF9915" w:rsidR="002A0CB0" w:rsidRPr="002A0CB0" w:rsidRDefault="002A0CB0"><w:pPr><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr></w:pPr><w:r><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:noProof/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:drawing><wp:inline distT="0" distB="0" distL="0" distR="0" wp14:anchorId="53F4ADE6" wp14:editId="11422EFB"><wp:extent cx="5731510" cy="2667635"/><wp:effectExtent l="0" t="0" r="2540" b="0"/><wp:docPr id="1064965530" name="Picture 1"/><wp:cNvGraphicFramePr><a:graphicFrameLocks xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" noChangeAspect="1"/></wp:cNvGraphicFramePr><a:graphic xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main"><a:graphicData uri="http://schemas.openxmlformats.org/drawingml/2006/picture"><pic:pic xmlns:pic="http://schemas.openxmlformats.org/drawingml/2006/picture"><pic:nvPicPr><pic:cNvPr id="1064965530" name="Picture 1064965530"/><pic:cNvPicPr/></pic:nvPicPr><pic:blipFill><a:blip r:embed="rId5" cstate="print"><a:extLst><a:ext uri="{28A0092B-C50C-407E-A947-70E740481C1C}"><a14:useLocalDpi xmlns:a14="http://schemas.microsoft.com/office/drawing/2010/main" val="0"/></a:ext></a:extLst></a:blip><a:stretch><a:fillRect/></a:stretch></pic:blipFill><pic:spPr><a:xfrm><a:off x="0" y="0"/><a:ext cx="5731510" cy="2667635"/></a:xfrm><a:prstGeom prst="rect"><a:avLst/></a:prstGeom></pic:spPr></pic:pic></a:graphicData></a:graphic></wp:inline></w:drawing></w:r><w:r><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:noProof/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:drawing><wp:inline distT="0" distB="0" distL="0" distR="0" wp14:anchorId="773DBE83" wp14:editId="19F6AA7F"><wp:extent cx="5731510" cy="2171700"/><wp:effectExtent l="0" t="0" r="2540" b="0"/><wp:docPr id="1095672081" name="Picture 2"/><wp:cNvGraphicFramePr><a:graphicFrameLocks xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" noChangeAspect="1"/></wp:cNvGraphicFramePr><a:graphic xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main"><a:graphicData uri="http://schemas.openxmlformats.org/drawingml/2006/picture"><pic:pic xmlns:pic="http://schemas.openxmlformats.org/drawingml/2006/picture"><pic:nvPicPr><pic:cNvPr id="1095672081" name="Picture 1095672081"/><pic:cNvPicPr/></pic:nvPicPr><pic:blipFill><a:blip r:embed="rId6" cstate="print"><a:extLst><a:ext uri="{28A0092B-C50C-407E-A947-70E740481C1C}"><a14:useLocalDpi xmlns:a14="http://schemas.microsoft.com/office/drawing/2010/main" val="0"/></a:ext></a:extLst></a:blip><a:stretch><a:fillRect/></a:stretch></pic:blipFill><pic:spPr><a:xfrm><a:off x="0" y="0"/><a:ext cx="5731510" cy="2171700"/></a:xfrm><a:prstGeom prst="rect"><a:avLst/></a:prstGeom></pic:spPr></pic:pic></a:graphicData></a:graphic></wp:inline></w:drawing></w:r><w:r><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:noProof/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:lastRenderedPageBreak/><w:drawing><wp:inline distT="0" distB="0" distL="0" distR="0" wp14:anchorId="3559F91D" wp14:editId="4F58BA7A"><wp:extent cx="5731510" cy="1680210"/><wp:effectExtent l="0" t="0" r="2540" b="0"/><wp:docPr id="2105685837" name="Picture 3"/><wp:cNvGraphicFramePr><a:graphicFrameLocks xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" noChangeAspect="1"/></wp:cNvGraphicFramePr><a:graphic xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main"><a:graphicData uri="http://schemas.openxmlformats.org/drawingml/2006/picture"><pic:pic xmlns:pic="http://schemas.openxmlformats.org/drawingml/2006/picture"><pic:nvPicPr><pic:cNvPr id="2105685837" name="Picture 2105685837"/><pic:cNvPicPr/></pic:nvPicPr><pic:blipFill><a:blip r:embed="rId7" cstate="print"><a:extLst><a:ext uri="{28A0092B-C50C-407E-A947-70E740481C1C}"><a14:useLocalDpi xmlns:a14="http://schemas.microsoft.com/office/drawing/2010/main" val="0"/></a:ext></a:extLst></a:blip><a:stretch><a:fillRect/></a:stretch></pic:blipFill><pic:spPr><a:xfrm><a:off x="0" y="0"/><a:ext cx="5731510" cy="1680210"/></a:xfrm><a:prstGeom prst="rect"><a:avLst/></a:prstGeom></pic:spPr></pic:pic></a:graphicData></a:graphic></wp:inline></w:drawing></w:r><w:r><w:rPr><w:rFonts w:ascii="Times New Roman" w:hAnsi="Times New Roman" w:cs="Times New Roman"/><w:noProof/><w:sz w:val="24"/><w:szCs w:val="24"/></w:rPr><w:drawing><wp:inline distT="0" distB="0" distL="0" distR="0" wp14:anchorId="583085C8" wp14:editId="1686E054"><wp:extent cx="5731510" cy="1654810"/><wp:effectExtent l="0" t="0" r="2540" b="2540"/><wp:docPr id="568199377" name="Picture 4"/><wp:cNvGraphicFramePr><a:graphicFrameLocks xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" noChangeAspect="1"/></wp:cNvGraphicFramePr><a:graphic xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main"><a:graphicData uri="http://schemas.openxmlformats.org/drawingml/2006/picture"><pic:pic xmlns:pic="http://schemas.openxmlformats.org/drawingml/2006/picture"><pic:nvPicPr><pic:cNvPr id="568199377" name="Picture 568199377"/><pic:cNvPicPr/></pic:nvPicPr><pic:blipFill><a:blip r:embed="rId8" cstate="print"><a:extLst><a:ext uri="{28A0092B-C50C-407E-A947-70E740481C1C}"><a14:useLocalDpi xmlns:a14="http://schemas.microsoft.com/office/drawing/2010/main" val="0"/></a:ext></a:extLst></a:blip><a:stretch><a:fillRect/></a:stretch></pic:blipFill><pic:spPr><a:xfrm><a:off x="0" y="0"/><a:ext cx="5731510" cy="1654810"/></a:xfrm><a:prstGeom prst="rect"><a:avLst/></a:prstGeom></pic:spPr></pic:pic></a:graphicData></a:graphic></wp:inline></w:drawing></w:r></w:p><w:sectPr w:rsidR="002A0CB0" w:rsidRPr="002A0CB0"><w:pgSz w:w="11906" w:h="16838"/><w:pgMar w:top="1440" w:right="1440" w:bottom="1440" w:left="1440" w:header="708" w:footer="708" w:gutter="0"/><w:cols w:space="708"/><w:docGrid w:linePitch="360"/></w:sectPr></w:body></w:document>